<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>If This Were a Movie - For Maryam ❤️</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Poppins', sans-serif;
            height: 100vh;
            height: -webkit-fill-available;
            width: 100vw;
            position: relative;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            height: -webkit-fill-available;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: none;
        }

        * {
            -webkit-tap-highlight-color: transparent;
        }

        .carousel-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            height: -webkit-fill-available;
            overflow: hidden;
        }

        .tap-zone {
            position: fixed;
            top: 0;
            width: 20px;
            height: 100%;
            height: -webkit-fill-available;
            z-index: 25;
            cursor: pointer;
            pointer-events: auto;
        }

        .tap-zone-left {
            left: 0;
        }

        .tap-zone-right {
            right: 0;
        }

        @media (max-width: 768px) {
            .tap-zone {
                width: 30px; /* Slightly larger on mobile for easier tapping */
            }
        }

        .carousel-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transform: scale(1.05);
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1),
                        transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            overflow: hidden;
        }

        .carousel-slide.active {
            opacity: 1;
            transform: scale(1);
        }

        .carousel-slide video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1),
                        transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .carousel-slide:not(.active) video {
            opacity: 0;
            transform: scale(1.05);
        }

        .carousel-slide.active video {
            opacity: 1;
            transform: scale(1);
        }

        .carousel-slide .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            z-index: 1;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                rgba(0, 0, 0, 0.2) 0%,
                rgba(0, 0, 0, 0.4) 50%,
                rgba(0, 0, 0, 0.7) 100%
            );
            z-index: 10;
            pointer-events: none;
        }

        .content-overlay {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 40px 40px 80px 40px;
            z-index: 20;
            pointer-events: none;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            gap: 30px;
        }

        /* Show navigation buttons only on desktop */
        @media (max-width: 768px) {
            .navigation-buttons {
                display: none !important;
            }
        }

        .memory-content {
            flex: 1;
            max-width: 60%;
            pointer-events: auto;
        }

        .memory-content.animate {
            animation: fadeInUp 0.9s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .memory-title {
            animation: titleSlideIn 0.9s cubic-bezier(0.16, 1, 0.3, 1) 0.1s both;
        }

        @keyframes titleSlideIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .memory-date {
            animation: dateSlideIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.2s both;
        }

        @keyframes dateSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .memory-description {
            animation: descriptionFadeIn 1s cubic-bezier(0.16, 1, 0.3, 1) 0.3s both;
        }

        @keyframes descriptionFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .memory-title {
            font-size: 4.5rem;
            font-family: 'Dancing Script', cursive;
            font-weight: 700;
            color: white;
            margin-bottom: 16px;
            text-shadow: 0 4px 25px rgba(0, 0, 0, 0.9),
                         0 2px 15px rgba(196, 69, 105, 0.6),
                         0 0 5px rgba(255, 255, 255, 0.1);
            line-height: 1.1;
            letter-spacing: 0.02em;
        }

        .memory-date {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 32px;
            font-weight: 500;
            font-family: 'Poppins', sans-serif;
            text-shadow: 0 2px 12px rgba(0, 0, 0, 0.7);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            opacity: 0.95;
        }

        .calendar-icon {
            width: 16px;
            height: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            opacity: 0.9;
        }

        .calendar-icon svg {
            width: 100%;
            height: 100%;
            fill: currentColor;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
        }

        .memory-description {
            font-size: 1.125rem;
            color: rgba(255, 255, 255, 0.98);
            line-height: 1.75;
            text-shadow: 0 3px 15px rgba(0, 0, 0, 0.8),
                         0 1px 5px rgba(0, 0, 0, 0.5);
            font-weight: 400;
            max-width: 85%;
            font-family: 'Poppins', sans-serif;
            letter-spacing: 0.01em;
            margin-top: 0;
        }

        .navigation-buttons {
            display: flex;
            gap: 20px;
            align-items: center;
            pointer-events: auto;
            animation: buttonsSlideIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.4s both;
        }

        @keyframes buttonsSlideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .nav-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .nav-button:hover {
            background: rgba(255, 255, 255, 0.35);
            transform: scale(1.15) translateY(-2px);
            box-shadow: 0 8px 25px rgba(196, 69, 105, 0.6);
            border-color: rgba(255, 255, 255, 0.7);
        }

        .nav-button:active {
            transform: scale(1.05) translateY(0);
            transition: all 0.15s ease;
        }

        .nav-button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50px;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.95);
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-family: 'Poppins', sans-serif;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 105, 180, 0.4);
            color: rgba(255, 255, 255, 1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .back-button:active {
            transform: translateY(0);
        }

        .slide-indicator {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 30;
            pointer-events: none;
        }

        .indicator-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .indicator-dot.active {
            background: rgba(255, 255, 255, 0.9);
            transform: scale(1.4);
            box-shadow: 0 0 10px rgba(196, 69, 105, 0.6);
        }

        .thumbnail-navigation {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 180px;
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            z-index: 40;
            transform: translateY(100%);
            opacity: 0;
            transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1),
                        opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            pointer-events: none;
            padding: 20px;
            box-sizing: border-box;
            border-top: 1px solid rgba(255, 255, 255, 0.15);
        }

        .thumbnail-navigation.visible {
            transform: translateY(0);
            opacity: 1;
            pointer-events: auto;
        }

        .thumbnail-scroll-container {
            width: 100%;
            height: 100%;
            overflow-x: auto;
            overflow-y: hidden;
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px 0;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior-x: contain;
            scroll-snap-type: x proximity;
        }

        .thumbnail-item {
            scroll-snap-align: start;
        }

        .thumbnail-scroll-container::-webkit-scrollbar {
            height: 6px;
        }

        .thumbnail-scroll-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .thumbnail-scroll-container::-webkit-scrollbar-thumb {
            background: rgba(196, 69, 105, 0.6);
            border-radius: 10px;
        }

        .thumbnail-scroll-container::-webkit-scrollbar-thumb:hover {
            background: rgba(196, 69, 105, 0.8);
        }

        .thumbnail-item {
            flex: 0 0 200px;
            height: 120px;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            position: relative;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 3px solid transparent;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            opacity: 0;
            animation: thumbnailFadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        .thumbnail-item:nth-child(1) { animation-delay: 0.1s; }
        .thumbnail-item:nth-child(2) { animation-delay: 0.15s; }
        .thumbnail-item:nth-child(3) { animation-delay: 0.2s; }
        .thumbnail-item:nth-child(4) { animation-delay: 0.25s; }
        .thumbnail-item:nth-child(5) { animation-delay: 0.3s; }
        .thumbnail-item:nth-child(6) { animation-delay: 0.35s; }
        .thumbnail-item:nth-child(7) { animation-delay: 0.4s; }
        .thumbnail-item:nth-child(8) { animation-delay: 0.45s; }

        @keyframes thumbnailFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .thumbnail-item:hover {
            transform: translateY(-8px) scale(1.08);
            box-shadow: 0 12px 30px rgba(196, 69, 105, 0.6);
        }

        .thumbnail-item.active {
            border-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 0 2px rgba(196, 69, 105, 0.8),
                        0 12px 30px rgba(196, 69, 105, 0.7);
            transform: scale(1.12) translateY(-3px);
        }

        .thumbnail-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .thumbnail-item:hover .thumbnail-image {
            transform: scale(1.15);
        }

        .thumbnail-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
            padding: 8px;
            color: white;
            font-size: 0.85rem;
            font-weight: 500;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .thumbnail-item:hover .thumbnail-overlay {
            opacity: 1;
        }

        .thumbnail-number {
            position: absolute;
            top: 8px;
            left: 8px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 600;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .thumbnail-item.active .thumbnail-number {
            background: rgba(196, 69, 105, 0.9);
            border-color: rgba(255, 255, 255, 0.9);
        }

        .video-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            pointer-events: none;
            z-index: 2;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        @media (max-width: 768px) {
            .content-overlay {
                flex-direction: column;
                align-items: flex-start;
                padding: 25px 20px 70px 20px;
            }

            .memory-content {
                max-width: 100%;
            }

            .memory-title {
                font-size: clamp(2rem, 8vw, 3rem);
                margin-bottom: 12px;
                line-height: 1.1;
                letter-spacing: 0.02em;
            }

            .memory-date {
                font-size: 0.8rem;
                margin-bottom: 20px;
                letter-spacing: 0.1em;
                gap: 6px;
            }

            .calendar-icon {
                width: 14px;
                height: 14px;
            }

            .memory-description {
                font-size: clamp(0.95rem, 4vw, 1rem);
                line-height: 1.7;
                max-width: 100%;
                letter-spacing: 0.01em;
            }

            .navigation-buttons {
                display: none; /* Hide on mobile - use swipe gestures instead */
            }

            .back-button {
                top: 15px;
                left: 15px;
                padding: 10px 20px;
                font-size: 0.9rem;
                z-index: 1001;
            }

            .slide-indicator {
                bottom: 25px;
                gap: 8px;
            }

            .indicator-dot {
                width: 8px;
                height: 8px;
            }

            .thumbnail-navigation {
                height: 140px;
                padding: 15px 10px;
            }

            .thumbnail-scroll-container {
                gap: 12px;
            }

            .thumbnail-item {
                flex: 0 0 140px;
                height: 85px;
            }

            .thumbnail-overlay {
                font-size: 0.75rem;
                padding: 6px;
            }

            .thumbnail-number {
                width: 22px;
                height: 22px;
                font-size: 0.7rem;
                top: 6px;
                left: 6px;
            }

            .video-indicator {
                width: 32px;
                height: 32px;
                font-size: 1rem;
            }

            /* Adjust animation delays for mobile */
            .memory-title {
                animation-duration: 0.7s;
            }

            .memory-date {
                animation-duration: 0.6s;
            }

            .memory-description {
                animation-duration: 0.8s;
            }
        }

        @media (max-width: 480px) {
            .content-overlay {
                padding: 20px 15px 60px 15px;
            }

            .memory-title {
                font-size: clamp(1.8rem, 7vw, 2.5rem);
                margin-bottom: 10px;
                line-height: 1.1;
                letter-spacing: 0.02em;
            }

            .memory-date {
                font-size: 0.75rem;
                margin-bottom: 18px;
                letter-spacing: 0.1em;
                gap: 5px;
            }

            .calendar-icon {
                width: 13px;
                height: 13px;
            }

            .memory-description {
                font-size: clamp(0.9rem, 3.5vw, 0.95rem);
                line-height: 1.65;
                letter-spacing: 0.01em;
            }

            .navigation-buttons {
                display: none; /* Hide on mobile - use swipe gestures instead */
            }

            .back-button {
                top: 12px;
                left: 12px;
                padding: 8px 16px;
                font-size: 0.85rem;
                z-index: 1001;
            }

            .slide-indicator {
                bottom: 20px;
                gap: 6px;
            }

            .indicator-dot {
                width: 7px;
                height: 7px;
            }

            .thumbnail-navigation {
                height: 120px;
                padding: 12px 8px;
            }

            .thumbnail-scroll-container {
                gap: 10px;
            }

            .thumbnail-item {
                flex: 0 0 110px;
                height: 70px;
            }

            .thumbnail-overlay {
                font-size: 0.7rem;
                padding: 5px;
            }

            .thumbnail-number {
                width: 20px;
                height: 20px;
                font-size: 0.65rem;
                top: 5px;
                left: 5px;
            }

            .video-indicator {
                width: 28px;
                height: 28px;
                font-size: 0.9rem;
            }
        }

        /* Landscape mobile orientation */
        @media (max-width: 768px) and (orientation: landscape) {
            .content-overlay {
                padding: 20px 30px 50px 30px;
            }

            .memory-title {
                font-size: clamp(2rem, 5vw, 2.5rem);
                margin-bottom: 8px;
            }

            .memory-date {
                margin-bottom: 12px;
            }

            .memory-description {
                font-size: clamp(0.9rem, 2.5vw, 1rem);
                line-height: 1.6;
            }

            .thumbnail-navigation {
                height: 100px;
            }

            .thumbnail-item {
                flex: 0 0 120px;
                height: 70px;
            }
        }

        /* Very small screens */
        @media (max-width: 360px) {
            .content-overlay {
                padding: 18px 12px 55px 12px;
            }

            .memory-title {
                font-size: 1.6rem;
            }

            .memory-date {
                font-size: 0.7rem;
            }

            .memory-description {
                font-size: 0.85rem;
            }

            .nav-button {
                width: 44px;
                height: 44px;
                font-size: 1.1rem;
            }

            .thumbnail-item {
                flex: 0 0 100px;
                height: 65px;
            }
        }

        /* Touch device optimizations */
        @media (hover: none) and (pointer: coarse) {
            .nav-button {
                min-width: 48px;
                min-height: 48px;
            }

            .nav-button:active {
                transform: scale(0.9);
            }

            .thumbnail-item:active {
                transform: scale(0.95);
            }

            .back-button:active {
                transform: scale(0.95);
            }
        }
    </style>
</head>

<body>
    <a href="index.html" class="back-button">← Back</a>

    <div class="carousel-container" id="carouselContainer">
        <!-- Slides will be dynamically created here -->
    </div>

    <div class="tap-zone tap-zone-left" id="leftTapZone"></div>
    <div class="tap-zone tap-zone-right" id="rightTapZone"></div>

    <div class="overlay"></div>

    <div class="content-overlay">
        <div class="memory-content">
            <div class="memory-title" id="memoryTitle">If This Were a Movie</div>
            <div class="memory-date" id="memoryDate">
                <span class="calendar-icon">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11zM5 7V6h14v1H5zm7 6h-2v-2h2v2zm0-4h-2V7h2v2zm4 4h-2v-2h2v2zm0-4h-2V7h2v2z"/>
                    </svg>
                </span>
                <span class="date-text">February 2025</span>
            </div>
            <div class="memory-description" id="memoryDescription">
                Our love story, captured frame by frame. Each moment is a scene, each memory a beautiful chapter in the movie of our lives together.
            </div>
        </div>

        <div class="navigation-buttons">
            <button class="nav-button" id="prevButton" aria-label="Previous">
                <span>←</span>
            </button>
            <button class="nav-button" id="nextButton" aria-label="Next">
                <span>→</span>
            </button>
        </div>
    </div>

    <div class="slide-indicator" id="slideIndicator"></div>

    <div class="thumbnail-navigation" id="thumbnailNavigation">
        <div class="thumbnail-scroll-container" id="thumbnailScrollContainer">
            <!-- Thumbnails will be dynamically created here -->
        </div>
    </div>

    <script>
        // Memory data - you can customize these with your own images and videos
        // Use 'image' for images or 'video' for videos. Optionally include 'thumbnail' for video thumbnails
        const memories = [
            {
                title: "If This Were a Movie",
                date: "February 2025",
                description: "Our love story, captured frame by frame. Each moment is a scene, each memory a beautiful chapter in the movie of our lives together.",
                image: "https://images.unsplash.com/photo-1518568814500-bf0f8d125f46?w=1920&q=80"
                // video: "path/to/video.mp4",  // Uncomment and add video path to use video instead
                // thumbnail: "path/to/thumbnail.jpg"  // Optional: thumbnail for video in navigation
            },
            {
                title: "The First Scene",
                date: "February 22nd, 2025",
                description: "The day our story began. Like the opening scene of a perfect movie, everything fell into place. Your smile, your laugh, the way you looked at me - I knew this was going to be special.",
                image: "https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?w=1920&q=80"
            },
            {
                title: "The Plot Thickens",
                date: "March 2025",
                description: "As we got to know each other, every conversation felt like a scene from a romantic comedy. The chemistry was undeniable, and I found myself falling for you more with each passing day.",
                video: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
                thumbnail: "https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=1920&q=80",
                image: "https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=1920&q=80"
            },
            {
                title: "The Climax",
                date: "Every Day Together",
                description: "Every moment with you feels like the best part of the movie. The climax isn't a single moment - it's every day we spend together, creating memories that will last forever.",
                image: "https://images.unsplash.com/photo-1522673607200-164f1f294328?w=1920&q=80"
            },
            {
                title: "The Sequel",
                date: "Forever",
                description: "This isn't the end of our story - it's just the beginning. I can't wait to see what adventures await us in the sequel. With you by my side, every day is a new scene worth watching.",
                image: "https://images.unsplash.com/photo-1519681393784-d120267933ba?w=1920&q=80"
            }
        ];

        let currentSlide = 0;
        let mouseY = 0;
        let thumbnailTimeout = null;

        // Initialize carousel
        function initCarousel() {
            const container = document.getElementById('carouselContainer');
            const indicator = document.getElementById('slideIndicator');
            const thumbnailContainer = document.getElementById('thumbnailScrollContainer');

            // Create slides
            memories.forEach((memory, index) => {
                const slide = document.createElement('div');
                slide.className = 'carousel-slide';
                if (index === 0) slide.classList.add('active');
                
                // Check if it's a video or image
                if (memory.video) {
                    const video = document.createElement('video');
                    video.src = memory.video;
                    video.autoplay = false;
                    video.loop = true;
                    video.muted = true;
                    video.playsInline = true;
                    video.preload = 'auto';
                    video.setAttribute('data-slide-index', index);
                    
                    // Add poster/thumbnail if available
                    if (memory.thumbnail || memory.image) {
                        video.poster = memory.thumbnail || memory.image;
                    }
                    
                    slide.appendChild(video);
                    slide.dataset.hasVideo = 'true';
                } else {
                    // Use image as background
                    slide.style.backgroundImage = `url(${memory.image})`;
                }
                
                container.appendChild(slide);

                // Create indicator dot
                const dot = document.createElement('div');
                dot.className = 'indicator-dot';
                if (index === 0) dot.classList.add('active');
                indicator.appendChild(dot);

                // Create thumbnail
                const thumbnailItem = document.createElement('div');
                thumbnailItem.className = 'thumbnail-item';
                if (index === 0) thumbnailItem.classList.add('active');
                thumbnailItem.dataset.index = index;
                
                // Use thumbnail for videos, or image for images
                const thumbnailSrc = memory.thumbnail || memory.image;
                const thumbnailImage = document.createElement('img');
                thumbnailImage.className = 'thumbnail-image';
                thumbnailImage.src = thumbnailSrc;
                thumbnailImage.alt = memory.title;
                
                const thumbnailNumber = document.createElement('div');
                thumbnailNumber.className = 'thumbnail-number';
                thumbnailNumber.textContent = index + 1;
                
                // Add video indicator if it's a video
                if (memory.video) {
                    const videoIndicator = document.createElement('div');
                    videoIndicator.className = 'video-indicator';
                    videoIndicator.innerHTML = '▶';
                    thumbnailItem.appendChild(videoIndicator);
                }
                
                const thumbnailOverlay = document.createElement('div');
                thumbnailOverlay.className = 'thumbnail-overlay';
                thumbnailOverlay.textContent = memory.title;
                
                thumbnailItem.appendChild(thumbnailImage);
                thumbnailItem.appendChild(thumbnailNumber);
                thumbnailItem.appendChild(thumbnailOverlay);
                
                thumbnailItem.addEventListener('click', () => {
                    goToSlide(index);
                });
                
                thumbnailContainer.appendChild(thumbnailItem);
            });

            updateContent();
            updateNavigation();
            
            // Play first video if it exists
            const firstSlide = container.querySelector('.carousel-slide.active');
            const firstVideo = firstSlide ? firstSlide.querySelector('video') : null;
            if (firstVideo) {
                firstVideo.play().catch(e => {
                    console.log('Video autoplay prevented:', e);
                });
            }
        }

        // Update content based on current slide
        function updateContent() {
            const memory = memories[currentSlide];
            const titleElement = document.getElementById('memoryTitle');
            const dateElement = document.getElementById('memoryDate');
            const descriptionElement = document.getElementById('memoryDescription');
            
            // Update text content
            titleElement.textContent = memory.title;
            const dateText = dateElement.querySelector('.date-text');
            if (dateText) {
                dateText.textContent = memory.date;
            } else {
                dateElement.innerHTML = `
                    <span class="calendar-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11zM5 7V6h14v1H5zm7 6h-2v-2h2v2zm0-4h-2V7h2v2zm4 4h-2v-2h2v2zm0-4h-2V7h2v2z"/>
                        </svg>
                    </span>
                    <span class="date-text">${memory.date}</span>`;
            }
            descriptionElement.textContent = memory.description;

            // Reset and trigger animations
            [titleElement, dateElement, descriptionElement].forEach((el, index) => {
                el.style.animation = 'none';
                setTimeout(() => {
                    el.style.animation = '';
                    void el.offsetWidth; // Force reflow
                    if (index === 0) {
                        el.style.animation = 'titleSlideIn 0.9s cubic-bezier(0.16, 1, 0.3, 1) 0.1s both';
                    } else if (index === 1) {
                        el.style.animation = 'dateSlideIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.2s both';
                    } else {
                        el.style.animation = 'descriptionFadeIn 1s cubic-bezier(0.16, 1, 0.3, 1) 0.3s both';
                    }
                }, 10);
            });
        }

        // Navigate to specific slide
        function goToSlide(index) {
            if (index >= 0 && index < memories.length) {
                currentSlide = index;
                updateContent();
                updateNavigation();
                scrollThumbnailIntoView();
            }
        }

        // Scroll active thumbnail into view
        function scrollThumbnailIntoView() {
            const thumbnailContainer = document.getElementById('thumbnailScrollContainer');
            const activeThumbnail = thumbnailContainer.querySelector(`.thumbnail-item[data-index="${currentSlide}"]`);
            if (activeThumbnail) {
                activeThumbnail.scrollIntoView({
                    behavior: 'smooth',
                    block: 'nearest',
                    inline: 'center'
                });
            }
        }

        // Update navigation buttons
        function updateNavigation() {
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');

            prevButton.disabled = currentSlide === 0;
            nextButton.disabled = currentSlide === memories.length - 1;

            // Update slides
            const slides = document.querySelectorAll('.carousel-slide');
            const indicators = document.querySelectorAll('.indicator-dot');
            const thumbnails = document.querySelectorAll('.thumbnail-item');

            slides.forEach((slide, index) => {
                const video = slide.querySelector('video');
                
                if (index === currentSlide) {
                    slide.classList.add('active');
                    // Play video if it exists
                    if (video) {
                        video.play().catch(e => {
                            // Autoplay might be blocked, that's okay
                            console.log('Video autoplay prevented:', e);
                        });
                    }
                } else {
                    slide.classList.remove('active');
                    // Pause video if it exists
                    if (video) {
                        video.pause();
                        video.currentTime = 0; // Reset to beginning
                    }
                }
            });

            indicators.forEach((dot, index) => {
                if (index === currentSlide) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });

            thumbnails.forEach((thumbnail, index) => {
                if (index === currentSlide) {
                    thumbnail.classList.add('active');
                } else {
                    thumbnail.classList.remove('active');
                }
            });

            scrollThumbnailIntoView();
        }

        // Navigate to next slide
        function nextSlide() {
            if (currentSlide < memories.length - 1) {
                currentSlide++;
                updateContent();
                updateNavigation();
            }
        }

        // Navigate to previous slide
        function prevSlide() {
            if (currentSlide > 0) {
                currentSlide--;
                updateContent();
                updateNavigation();
            }
        }

        // Event listeners
        document.getElementById('nextButton').addEventListener('click', nextSlide);
        document.getElementById('prevButton').addEventListener('click', prevSlide);

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') {
                nextSlide();
            } else if (e.key === 'ArrowLeft') {
                prevSlide();
            }
        });

        // Touch/swipe support for carousel navigation
        let touchStartX = 0;
        let touchStartY = 0;
        let touchEndX = 0;
        let touchEndY = 0;
        let isSwiping = false;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
            isSwiping = false;
        }, { passive: true });

        document.addEventListener('touchmove', (e) => {
            const currentX = e.changedTouches[0].screenX;
            const currentY = e.changedTouches[0].screenY;
            const diffX = Math.abs(currentX - touchStartX);
            const diffY = Math.abs(currentY - touchStartY);
            
            // Only consider it a swipe if horizontal movement is greater than vertical
            if (diffX > diffY && diffX > 10) {
                isSwiping = true;
            }
        }, { passive: true });

        document.addEventListener('touchend', (e) => {
            if (!isSwiping) return;
            
            touchEndX = e.changedTouches[0].screenX;
            touchEndY = e.changedTouches[0].screenY;
            handleSwipe();
        }, { passive: true });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diffX = touchStartX - touchEndX;
            const diffY = Math.abs(touchStartY - touchEndY);
            
            // Only trigger swipe if horizontal movement is significant and greater than vertical
            if (Math.abs(diffX) > swipeThreshold && Math.abs(diffX) > diffY) {
                // Check if user is interacting with thumbnail navigation
                const thumbnailNav = document.getElementById('thumbnailNavigation');
                const touchY = touchEndY;
                const windowHeight = window.innerHeight;
                
                // Don't trigger carousel swipe if user is near bottom (thumbnail nav area)
                if (touchY < windowHeight - 150) {
                    if (diffX > 0) {
                        // Swipe left - next slide
                        nextSlide();
                    } else {
                        // Swipe right - previous slide
                        prevSlide();
                    }
                }
            }
        }

        // Thumbnail navigation visibility based on mouse position
        function handleMouseMove(e) {
            mouseY = e.clientY;
            const windowHeight = window.innerHeight;
            const threshold = 20; // Show when mouse is within 20px of bottom
            
            const thumbnailNav = document.getElementById('thumbnailNavigation');
            
            if (mouseY > windowHeight - threshold) {
                thumbnailNav.classList.add('visible');
                // Clear any existing timeout
                if (thumbnailTimeout) {
                    clearTimeout(thumbnailTimeout);
                    thumbnailTimeout = null;
                }
            } else {
                // Hide after a delay when mouse moves away
                if (!thumbnailTimeout) {
                    thumbnailTimeout = setTimeout(() => {
                        thumbnailNav.classList.remove('visible');
                        thumbnailTimeout = null;
                    }, 500);
                }
            }
        }

        // Keep thumbnail visible when hovering over it
        function handleThumbnailHover(e) {
            const thumbnailNav = document.getElementById('thumbnailNavigation');
            if (e.type === 'mouseenter') {
                thumbnailNav.classList.add('visible');
                if (thumbnailTimeout) {
                    clearTimeout(thumbnailTimeout);
                    thumbnailTimeout = null;
                }
            }
        }

        // Initialize on load
        initCarousel();

        // Mouse move listener for thumbnail navigation (desktop)
        document.addEventListener('mousemove', handleMouseMove);
        
        // Touch support for mobile thumbnail navigation
        let thumbnailTouchStartY = 0;
        document.addEventListener('touchstart', (e) => {
            thumbnailTouchStartY = e.touches[0].clientY;
        }, { passive: true });
        
        document.addEventListener('touchmove', (e) => {
            const touchY = e.touches[0].clientY;
            const windowHeight = window.innerHeight;
            const threshold = 30; // Slightly larger threshold for touch
            const thumbnailNav = document.getElementById('thumbnailNavigation');
            
            // Show thumbnail nav when swiping up from bottom
            if (touchY > windowHeight - threshold && thumbnailTouchStartY > touchY) {
                thumbnailNav.classList.add('visible');
                if (thumbnailTimeout) {
                    clearTimeout(thumbnailTimeout);
                    thumbnailTimeout = null;
                }
            }
        }, { passive: true });
        
        const thumbnailNav = document.getElementById('thumbnailNavigation');
        thumbnailNav.addEventListener('mouseenter', handleThumbnailHover);
        thumbnailNav.addEventListener('mouseleave', () => {
            thumbnailTimeout = setTimeout(() => {
                thumbnailNav.classList.remove('visible');
                thumbnailTimeout = null;
            }, 500);
        });
        
        // Keep thumbnail nav visible on touch devices when interacting
        thumbnailNav.addEventListener('touchstart', () => {
            thumbnailNav.classList.add('visible');
            if (thumbnailTimeout) {
                clearTimeout(thumbnailTimeout);
                thumbnailTimeout = null;
            }
        }, { passive: true });

        // Tap zones for Instagram-like navigation
        const leftTapZone = document.getElementById('leftTapZone');
        const rightTapZone = document.getElementById('rightTapZone');

        // Left tap zone - go to previous slide
        leftTapZone.addEventListener('click', () => {
            prevSlide();
        });

        leftTapZone.addEventListener('touchend', (e) => {
            e.preventDefault();
            prevSlide();
        }, { passive: false });

        // Right tap zone - go to next slide
        rightTapZone.addEventListener('click', () => {
            nextSlide();
        });

        rightTapZone.addEventListener('touchend', (e) => {
            e.preventDefault();
            nextSlide();
        }, { passive: false });

        // Auto-advance (optional - uncomment if you want slides to auto-advance)
        // setInterval(() => {
        //     if (currentSlide < memories.length - 1) {
        //         nextSlide();
        //     } else {
        //         currentSlide = 0;
        //         updateContent();
        //         updateNavigation();
        //     }
        // }, 5000);
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
    <script src="auth.js"></script>
    <script>
        // Protect this page - redirect to login if not authenticated
        Auth.protectPage();
    </script>
</body>

</html>
