<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MH Station - Music Player ❤️</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #121212;
            color: #ffffff;
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            height: 100vh;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes twinkle {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.7;
                transform: scale(1.1);
            }
        }

        @keyframes vibrate {
            0%, 100% {
                transform: translateX(0) scale(1);
            }
            25% {
                transform: translateX(-2px) scale(1.05);
            }
            75% {
                transform: translateX(2px) scale(1.05);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes rotateAlbum {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -1000px 0;
            }
            100% {
                background-position: 1000px 0;
            }
        }

        @keyframes glow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(255, 107, 157, 0.5);
            }
            50% {
                box-shadow: 0 0 30px rgba(255, 107, 157, 0.8);
            }
        }

        .main-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: linear-gradient(180deg, #ff6b9d 0%, #c44569 50%, #121212 100%);
            background-size: 100% 400px;
            background-repeat: no-repeat;
            animation: fadeIn 0.6s ease-out;
        }

        .top-bar {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 16px 32px;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            animation: slideInRight 0.5s ease-out;
        }

        .player-brand {
            font-size: 20px;
            font-weight: 700;
            color: white;
            margin-right: 24px;
            letter-spacing: 0.5px;
        }

        .heart-wave-container {
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .heart-wave-container .wave {
            position: absolute;
            border: 2px solid #ff6b9d;
            border-radius: 50%;
            opacity: 0;
            animation: wavePulse 2s ease-out infinite;
        }

        .heart-wave-container .wave1 {
            width: 20px;
            height: 20px;
            animation-delay: 0s;
        }

        .heart-wave-container .wave2 {
            width: 20px;
            height: 20px;
            animation-delay: 0.6s;
        }

        .heart-wave-container .wave3 {
            width: 20px;
            height: 20px;
            animation-delay: 1.2s;
        }

        @keyframes wavePulse {
            0% {
                transform: scale(1);
                opacity: 0.8;
            }
            100% {
                transform: scale(2.5);
                opacity: 0;
            }
        }

        @keyframes pulseHeart {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }

        .main-tabs {
            display: flex;
            gap: 8px;
        }

        .main-tab {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 20px;
            padding: 10px 24px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .main-tab::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .main-tab:hover::before {
            width: 300px;
            height: 300px;
        }

        .main-tab:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            transform: translateY(-2px);
        }

        .main-tab.active {
            background: #ff6b9d;
            color: white;
            transform: scale(1.05);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #ff6b9d;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .user-avatar:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 4px 12px rgba(255, 107, 157, 0.6);
        }

        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 24px 32px;
            scroll-behavior: smooth;
        }

        .content-area::-webkit-scrollbar {
            width: 10px;
        }

        .content-area::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        .content-area::-webkit-scrollbar-thumb {
            background: rgba(255, 107, 157, 0.5);
            border-radius: 5px;
        }

        .content-area::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 107, 157, 0.7);
        }

        .now-playing-section {
            display: flex;
            align-items: flex-start;
            gap: 24px;
            margin-bottom: 40px;
            padding-top: 0;
            animation: fadeIn 0.8s ease-out 0.2s both;
        }

        .album-art-large {
            width: 232px;
            height: 232px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: scaleIn 0.6s ease-out 0.3s both;
        }

        .album-art-large:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.7);
        }

        .album-art-large.playing img:not(.collage-img) {
            animation: rotateAlbum 20s linear infinite;
        }

        .album-art-large.playing .album-collage img,
        .album-art-large.playing .album-collage-item img {
            animation: none !important;
        }

        .album-art-large i {
            font-size: 64px;
            color: rgba(255, 255, 255, 0.3);
        }

        .album-art-large img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
            animation: fadeIn 0.5s ease-out;
        }

        .album-art-large.has-image i {
            display: none;
        }

        .album-collage {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            width: 100%;
            height: 100%;
            gap: 2px;
            opacity: 1;
            transition: opacity 0.3s ease-in-out;
        }

        .album-collage.fading {
            opacity: 0;
        }

        .album-collage-item {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
            animation: scaleIn 0.5s ease-out;
        }

        .album-collage-item:nth-child(1) {
            animation-delay: 0.1s;
        }

        .album-collage-item:nth-child(2) {
            animation-delay: 0.2s;
        }

        .album-collage-item:nth-child(3) {
            animation-delay: 0.3s;
        }

        .album-collage-item:nth-child(4) {
            animation-delay: 0.4s;
        }

        .album-collage-item:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        .album-collage-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .album-collage-item:hover img {
            transform: scale(1.1);
        }

        .album-collage-item i {
            font-size: 24px;
            color: rgba(255, 255, 255, 0.3);
        }

        .album-art-large.show-collage img:not(.collage-img) {
            display: none;
        }

        .album-art-large.show-collage i {
            display: none;
        }

        .song-details {
            flex: 1;
            padding-top: 0;
        }

        .song-type {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            color: rgba(255, 255, 255, 0.8);
        }

        .song-title-large {
            font-size: 72px;
            font-weight: 700;
            line-height: 1;
            margin-bottom: 12px;
            color: white;
            animation: slideInLeft 0.6s ease-out 0.4s both;
            transition: all 0.3s ease;
        }

        .song-artist-large {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 24px;
            animation: slideInLeft 0.6s ease-out 0.5s both;
            transition: all 0.3s ease;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 16px;
            animation: slideInLeft 0.6s ease-out 0.6s both;
        }

        .action-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            color: white;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .action-btn:hover {
            background: rgba(255, 107, 157, 0.3);
            border-color: rgba(255, 107, 157, 0.5);
            transform: scale(1.05);
        }

        .action-btn:active {
            transform: scale(0.98);
        }

        .action-btn i {
            font-size: 16px;
        }

        .action-btn#playHeaderBtn {
            background: #ff6b9d;
            border-color: #ff6b9d;
            padding: 12px 32px;
        }

        .action-btn#playHeaderBtn:hover {
            background: #ff8fb3;
            border-color: #ff8fb3;
            box-shadow: 0 4px 16px rgba(255, 107, 157, 0.4);
        }

        .action-btn.outline {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .action-btn.outline:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .action-btn.outline.active {
            border-color: #ff6b9d;
            color: #ff6b9d;
            background: rgba(255, 107, 157, 0.1);
        }

        .action-btn.outline.active:hover {
            border-color: #ff8fb3;
            color: #ff8fb3;
            background: rgba(255, 107, 157, 0.2);
        }

        .player-controls {
            background: #181818;
            border-top: 1px solid #282828;
            padding: 16px 24px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            position: sticky;
            bottom: 0;
            z-index: 100;
            animation: slideInLeft 0.6s ease-out;
        }

        .progress-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .time-display {
            font-size: 11px;
            color: #b3b3b3;
            min-width: 40px;
            text-align: center;
        }

        .progress-bar-wrapper {
            flex: 1;
            height: 4px;
            background: #535353;
            border-radius: 2px;
            cursor: pointer;
            position: relative;
            user-select: none;
            -webkit-user-select: none;
            touch-action: none;
        }

        .progress-bar-wrapper.dragging {
            cursor: grabbing;
        }

        .progress-bar-wrapper.dragging .progress-bar-fill {
            height: 6px;
            margin-top: -1px;
        }

        .progress-bar-wrapper:hover {
            background: #727272;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b9d, #ff8fb3);
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s linear;
            position: relative;
            overflow: hidden;
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        .progress-bar-wrapper:hover .progress-bar-fill {
            background: #ff8fb3;
            height: 6px;
            margin-top: -1px;
        }

        .control-buttons {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
        }

        .control-btn {
            background: none;
            border: none;
            color: #b3b3b3;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .control-btn:hover {
            color: #ffffff;
            transform: scale(1.15);
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .control-btn.play-pause {
            width: 32px;
            height: 32px;
            background: #ffffff;
            color: #000000;
            border-radius: 50%;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .control-btn.play-pause:hover {
            transform: scale(1.15);
            background: #ff6b9d;
            color: white;
            box-shadow: 0 4px 16px rgba(255, 107, 157, 0.5);
        }

        .control-btn.play-pause.playing {
            /* No animation */
        }

        .control-btn.small {
            font-size: 16px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn.medium {
            font-size: 20px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .now-playing-info {
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 180px;
            cursor: pointer;
            transition: opacity 0.2s ease;
        }

        .now-playing-info:hover {
            opacity: 0.8;
        }

        /* Full Screen Player Modal */
        .fullscreen-player {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #000000 100%);
            background-image: var(--bg-image, linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #000000 100%));
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            z-index: 1000;
            overflow: hidden;
            animation: fadeIn 0.4s ease-out;
            transition: background-image 0.6s ease-in-out;
        }

        .fullscreen-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                rgba(0, 0, 0, 0.2) 0%,
                rgba(0, 0, 0, 0.4) 40%,
                rgba(0, 0, 0, 0.6) 70%,
                rgba(0, 0, 0, 0.75) 100%
            );
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            z-index: 1;
            pointer-events: none;
        }

        .fullscreen-overlay::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to top,
                rgba(0, 0, 0, 0.8) 0%,
                rgba(0, 0, 0, 0.5) 30%,
                transparent 70%
            );
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 1;
            pointer-events: none;
        }

        .fullscreen-player.active {
            display: flex;
            flex-direction: column;
        }

        .fullscreen-content {
            position: relative;
            z-index: 2;
        }

        .fullscreen-close {
            position: absolute;
            top: 24px;
            right: 24px;
            background: rgba(255, 255, 255, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            z-index: 1001;
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .fullscreen-close:hover {
            background: rgba(255, 107, 157, 0.2);
            border-color: rgba(255, 107, 157, 0.4);
            transform: rotate(90deg) scale(1.05);
            color: #ff6b9d;
        }

        .fullscreen-content {
            flex: 1;
            display: grid;
            grid-template-columns: 0.9fr 1.1fr;
            gap: 60px;
            padding: 40px 60px;
            max-width: 2000px;
            margin: 0 auto;
            width: 100%;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            box-sizing: border-box;
            position: relative;
            z-index: 2;
            backdrop-filter: blur(0px);
        }

        .fullscreen-left {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 16px;
            animation: slideInLeft 0.6s ease-out;
            height: 100%;
            overflow: hidden;
            min-height: 0;
            padding: 40px 20px;
            text-align: center;
        }

        .fullscreen-album-art {
            width: 360px;
            height: 360px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            flex-shrink: 0;
        }

        .fullscreen-album-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .fullscreen-album-art i {
            font-size: 80px;
            color: rgba(255, 255, 255, 0.3);
        }

        .fullscreen-right {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            animation: slideInRight 0.6s ease-out 0.2s both;
            height: 100%;
            overflow: hidden;
            padding: 40px 0 40px 60px;
        }


        .fullscreen-song-info {
            text-align: center;
            margin-bottom: 0;
            animation: fadeIn 0.6s ease-out 0.2s both;
            flex-shrink: 0;
            width: 100%;
            max-width: 360px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .fullscreen-song-title {
            font-size: 28px;
            font-weight: 700;
            color: white;
            margin-bottom: 10px;
            line-height: 1.3;
            letter-spacing: -0.8px;
            text-shadow: 0 2px 20px rgba(0, 0, 0, 0.5);
        }

        .fullscreen-song-artist {
            font-size: 20px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 8px;
            font-weight: 500;
            letter-spacing: 0.3px;
        }

        .fullscreen-lyrics-link {
            font-size: 14px;
            color: #ff6b9d;
            cursor: pointer;
            display: inline-block;
            transition: all 0.3s ease;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            margin-top: 4px;
            position: relative;
        }

        .fullscreen-lyrics-link:hover {
            color: #ff8fb3;
            transform: translateX(4px);
        }

        .fullscreen-lyrics-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: #ff6b9d;
            transition: width 0.3s ease;
        }

        .fullscreen-lyrics-link:hover::after {
            background: #ff8fb3;
            width: 100%;
        }

        .fullscreen-lyrics-link.active {
            color: #ff6b9d;
        }

        .fullscreen-lyrics-link.active::after {
            width: 100%;
            background: #ff6b9d;
        }

        .fullscreen-progress {
            width: 100%;
            margin-bottom: 0;
            flex-shrink: 0;
            max-width: 360px;
            width: 360px;
        }

        .fullscreen-progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 12px;
            position: relative;
            transition: height 0.2s ease;
            user-select: none;
            -webkit-user-select: none;
            touch-action: none;
        }

        .fullscreen-progress-bar.dragging {
            cursor: grabbing;
            height: 8px;
        }

        .fullscreen-progress-bar.dragging .fullscreen-progress-fill {
            height: 8px;
        }

        .fullscreen-progress-bar:hover {
            height: 8px;
        }

        .fullscreen-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b9d 0%, #ff8fb3 50%, #ffb3d1 100%);
            border-radius: 10px;
            width: 0%;
            transition: width 0.1s linear;
            box-shadow: 0 0 10px rgba(255, 107, 157, 0.5);
        }

        .fullscreen-time-info {
            display: flex;
            justify-content: space-between;
            color: rgba(255, 255, 255, 0.8);
            font-size: 12px;
            font-weight: 500;
            letter-spacing: 0.2px;
        }

        .fullscreen-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 0;
            flex-shrink: 0;
            position: relative;
            flex-wrap: wrap;
            /* padding: 8px 0; */
        }

        .fullscreen-back-btn {
            display: none;
            position: fixed;
            background: rgba(255, 255, 255, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 44px;
            height: 44px;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            z-index: 1003;
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .fullscreen-back-btn:hover {
            background: rgba(255, 107, 157, 0.2);
            border-color: rgba(255, 107, 157, 0.4);
            transform: translateX(-3px) scale(1.05);
            color: #ff6b9d;
        }

        .fullscreen-control-btn {
            background: rgba(255, 255, 255, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 12px;
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .fullscreen-control-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
            color: white;
        }

        .fullscreen-volume-control {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 16px;
            width: 360px;
            max-width: 360px;
            padding: 8px 16px;
        }

        .fullscreen-volume-icon {
            color: #ffffff;
            font-size: 18px;
            cursor: pointer;
            width: 24px;
            min-width: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .fullscreen-volume-icon:hover {
            color: #ff6b9d;
            transform: scale(1.15);
        }

        .fullscreen-volume-icon i {
            display: inline-block;
            line-height: 1;
        }

        .fullscreen-volume-slider {
            flex: 1;
            height: 6px;
            background: linear-gradient(to right, #ff6b9d 0%, #ff6b9d var(--volume-percent, 70%), rgba(255, 255, 255, 0.15) var(--volume-percent, 70%), rgba(255, 255, 255, 0.15) 100%);
            border-radius: 3px;
            outline: none;
            cursor: pointer;
            -webkit-appearance: none;
            transition: all 0.3s ease;
        }

        .fullscreen-volume-slider:hover {
            height: 8px;
            background: linear-gradient(to right, #ff8fb3 0%, #ff8fb3 var(--volume-percent, 70%), rgba(255, 255, 255, 0.25) var(--volume-percent, 70%), rgba(255, 255, 255, 0.25) 100%);
        }

        .fullscreen-volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: #ff6b9d;
            border-radius: 50%;
            cursor: pointer;
            opacity: 1;
            transition: all 0.2s ease;
            box-shadow: 0 0 0 2px rgba(255, 107, 157, 0.3), 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .fullscreen-volume-slider:hover::-webkit-slider-thumb {
            width: 18px;
            height: 18px;
            box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.4), 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .fullscreen-volume-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #ff6b9d;
            border-radius: 50%;
            cursor: pointer;
            border: none;
            opacity: 1;
            transition: all 0.2s ease;
            box-shadow: 0 0 0 2px rgba(255, 107, 157, 0.3), 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .fullscreen-volume-slider:hover::-moz-range-thumb {
            width: 18px;
            height: 18px;
            box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.4), 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .fullscreen-control-btn.play-pause {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.9) 0%, rgba(255, 143, 179, 0.9) 100%);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.3);
            font-size: 18px;
            box-shadow: 0 8px 32px rgba(255, 107, 157, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .fullscreen-control-btn.play-pause:hover {
            background: linear-gradient(135deg, #ff8fb3 0%, #ffb3d1 100%);
            transform: scale(1.08);
            box-shadow: 0 12px 32px rgba(255, 107, 157, 0.6),
                        0 0 0 3px rgba(255, 107, 157, 0.3);
        }

        .fullscreen-control-btn.play-pause.playing {
            /* No animation */
        }

        .fullscreen-lyrics {
            width: 100%;
            background: transparent;
            padding: 0;
            height: 100%;
            overflow-y: auto;
            animation: fadeIn 0.8s ease-out 0.4s both;
            display: flex;
            flex-direction: column;
            scroll-behavior: smooth;
        }

        .fullscreen-lyrics::-webkit-scrollbar {
            width: 8px;
        }

        .fullscreen-lyrics::-webkit-scrollbar-track {
            background: transparent;
            margin: 20px 0;
        }

        .fullscreen-lyrics::-webkit-scrollbar-thumb {
            background: rgba(255, 107, 157, 0.4);
            border-radius: 4px;
            border: 2px solid transparent;
            background-clip: padding-box;
        }

        .fullscreen-lyrics::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 107, 157, 0.7);
            background-clip: padding-box;
        }

        .lyrics-content::-webkit-scrollbar {
            width: 8px;
        }

        .lyrics-content::-webkit-scrollbar-track {
            background: transparent;
        }

        .lyrics-content::-webkit-scrollbar-thumb {
            background: rgba(255, 107, 157, 0.4);
            border-radius: 4px;
        }

        .lyrics-content::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 107, 157, 0.7);
        }

        .lyrics-title {
            font-size: 11px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 40px;
            text-align: left;
            flex-shrink: 0;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .lyrics-content {
            font-size: 28px;
            line-height: 2.4;
            color: rgba(255, 255, 255, 0.95);
            text-align: left;
            white-space: pre-line;
            flex: 1;
            overflow-y: auto;
            font-weight: 400;
            letter-spacing: 0.2px;
        }

        .lyrics-line {
            margin-bottom: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 0;
            opacity: 0.7;
            position: relative;
        }

        .lyrics-line:hover {
            opacity: 1;
            color: #ff6b9d;
        }

        .lyrics-line.active {
            color: #ffffff;
            font-weight: 500;
            opacity: 1;
            transform: translateX(16px);
            text-shadow: 0 0 30px rgba(255, 107, 157, 0.5);
        }

        .lyrics-line.active::before {
            content: '';
            position: absolute;
            left: -20px;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 60%;
            background: #ff6b9d;
            border-radius: 2px;
            box-shadow: 0 0 10px rgba(255, 107, 157, 0.6);
        }

        .lyrics-line:empty {
            margin-bottom: 12px;
        }

        /* Lyrics View Mode */
        .fullscreen-player.lyrics-mode {
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .fullscreen-player.lyrics-mode .fullscreen-content {
            grid-template-columns: 1fr;
            padding: 0;
            gap: 0;
            height: 100vh;
            max-height: 100vh;
            overflow: hidden;
            align-items: stretch;
        }

        .fullscreen-player.lyrics-mode .fullscreen-left {
            display: none;
        }

        .fullscreen-player.lyrics-mode .fullscreen-right {
            padding: 0;
            height: 100vh;
            max-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .fullscreen-player.lyrics-mode .fullscreen-lyrics {
            flex: 1;
            padding: 80px 40px 200px;
            overflow-y: auto;
            height: 100vh;
            max-height: 100vh;
            width: 100%;
            box-sizing: border-box;
        }

        .fullscreen-player.lyrics-mode .lyrics-content {
            font-size: 32px;
            line-height: 2.4;
            text-align: center;
        }

        .fullscreen-player.lyrics-mode .lyrics-title {
            font-size: 14px;
            margin-bottom: 40px;
            text-align: center;
        }

        .fullscreen-player.lyrics-mode .fullscreen-player-controls-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.85) 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 12px 16px;
            z-index: 1002;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 12px;
            min-height: auto;
        }


        .fullscreen-player.lyrics-mode .fullscreen-close {
            display: none;
        }

        .fullscreen-player-controls-bottom {
            display: none;
        }

        .fullscreen-player.lyrics-mode .fullscreen-player-controls-bottom {
            display: flex;
            flex-direction: row;
            gap: 12px;
            position: relative;
            align-items: center;
        }

        .fullscreen-player.lyrics-mode .fullscreen-back-btn {
            display: flex;
            position: fixed;
            top: 24px;
            left: 24px;
            background: rgba(255, 255, 255, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 44px;
            height: 44px;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            z-index: 1003;
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .fullscreen-player.lyrics-mode .fullscreen-back-btn:hover {
            background: rgba(255, 107, 157, 0.2);
            border-color: rgba(255, 107, 157, 0.4);
            transform: translateX(-3px) scale(1.05);
            color: #ff6b9d;
        }


        .fullscreen-player-controls-bottom .song-info-mini {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-shrink: 0;
            min-width: 0;
            flex: 0 0 auto;
        }

        .fullscreen-player-controls-bottom .song-info-mini img,
        .fullscreen-player-controls-bottom .song-info-mini #lyricsViewAlbumArt {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            object-fit: cover;
            flex-shrink: 0;
        }

        .fullscreen-player-controls-bottom .song-info-mini-text {
            flex: 0 1 auto;
            min-width: 0;
            max-width: 150px;
        }

        .fullscreen-player-controls-bottom .song-info-mini-title {
            font-size: 13px;
            font-weight: 600;
            color: white;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 1.2;
        }

        .fullscreen-player-controls-bottom .song-info-mini-artist {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 1.2;
            margin-top: 2px;
        }

        .fullscreen-player-controls-bottom .progress-section-mini {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 0;
        }

        .fullscreen-player-controls-bottom .time-display-mini {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
            min-width: 32px;
            text-align: center;
            flex-shrink: 0;
            font-variant-numeric: tabular-nums;
        }

        .fullscreen-player-controls-bottom .progress-bar-wrapper-mini {
            flex: 1;
            height: 3px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 2px;
            cursor: pointer;
            position: relative;
            min-width: 0;
        }

        .fullscreen-player-controls-bottom .progress-bar-fill-mini {
            height: 100%;
            background: linear-gradient(90deg, #ff6b9d, #ff8fb3);
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s linear;
        }

        .fullscreen-player-controls-bottom .control-buttons-mini {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .fullscreen-player-controls-bottom .control-btn-mini {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fullscreen-player-controls-bottom .control-btn-mini:hover {
            color: #ffffff;
            transform: scale(1.15);
        }

        .fullscreen-player-controls-bottom .control-btn-mini.play-pause {
            width: 36px;
            height: 36px;
            background: #ffffff;
            color: #000000;
            border-radius: 50%;
            font-size: 12px;
        }

        .fullscreen-player-controls-bottom .control-btn-mini.play-pause:hover {
            background: #ff6b9d;
            color: white;
            transform: scale(1.1);
        }

        .fullscreen-player-controls-bottom .control-btn-mini.small {
            font-size: 14px;
            width: 28px;
            height: 28px;
            opacity: 0.8;
        }

        .fullscreen-player-controls-bottom .control-btn-mini.small:hover {
            opacity: 1;
        }

        .fullscreen-player-controls-bottom .control-btn-mini.medium {
            font-size: 16px;
            width: 28px;
            height: 28px;
        }


        @media (max-width: 1024px) {
            /* Tablet Fullscreen Player Animations */
            .fullscreen-player {
                animation: mobileFullscreenSlideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .fullscreen-player.active {
                animation: mobileFullscreenSlideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .fullscreen-content {
                grid-template-columns: 1fr;
                gap: 30px;
                padding: 20px 16px;
                height: 100vh;
                overflow-y: auto;
                animation: mobileFullscreenFadeScale 0.4s ease-out 0.1s both;
            }

            .fullscreen-left {
                padding: 10px;
                order: 1;
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.2s both;
            }

            .fullscreen-right {
                padding: 10px;
                padding-left: 10px;
                order: 2;
                display: none; /* Hide lyrics by default on mobile */
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
            }

            .fullscreen-album-art {
                width: min(450px, 70vw);
                height: min(450px, 70vw);
                max-height: 50vh;
                animation: mobileFullscreenScaleIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
            }

            .fullscreen-left {
                align-items: center;
                gap: 20px;
            }

            .fullscreen-song-info {
                text-align: center;
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.4s both;
                max-width: min(450px, 70vw);
            }

            .fullscreen-song-title {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.45s both;
            }

            .fullscreen-song-artist {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.5s both;
            }

            .fullscreen-progress {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.55s both;
                max-width: min(450px, 70vw);
                width: min(450px, 70vw);
            }

            .fullscreen-controls {
                width: min(450px, 70vw);
                max-width: min(450px, 70vw);
            }

            .fullscreen-volume-control {
                width: min(450px, 70vw);
                max-width: min(450px, 70vw);
            }

            .fullscreen-controls {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.6s both;
            }

            .fullscreen-volume-control {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.7s both;
            }

            .fullscreen-song-title {
                font-size: 24px;
            }

            .fullscreen-song-artist {
                font-size: 16px;
            }

            .fullscreen-lyrics-link {
                font-size: 12px;
                margin-top: 6px;
            }

            .fullscreen-controls {
                justify-content: center;
                gap: 12px;
                flex-wrap: wrap;
            }

            .fullscreen-volume-control {
                max-width: 100%;
            }

            .fullscreen-lyrics {
                padding: 0;
            }

            .lyrics-title {
                text-align: center;
                font-size: 10px;
                margin-bottom: 28px;
                letter-spacing: 1.5px;
            }

            .lyrics-content {
                text-align: center;
                font-size: 22px;
                line-height: 2.2;
            }

            .lyrics-line.active {
                transform: translateX(0);
            }

            .lyrics-line.active::before {
                display: none;
            }

            .lyrics-line:hover {
                transform: translateX(0);
            }

            /* Lyrics view mode on mobile */
            .fullscreen-player.lyrics-mode .fullscreen-content {
                height: 100vh;
                max-height: 100vh;
            }

            .fullscreen-player.lyrics-mode .fullscreen-right {
                height: 100vh;
                max-height: 100vh;
            }

            .fullscreen-player.lyrics-mode .fullscreen-lyrics {
                padding: 60px 20px 180px;
                height: 100vh;
                max-height: 100vh;
            }

            .fullscreen-player.lyrics-mode .lyrics-content {
                font-size: 24px;
                line-height: 2.2;
            }

            .fullscreen-player.lyrics-mode .fullscreen-back-btn {
                top: 16px;
                left: 16px;
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .fullscreen-player.lyrics-mode .fullscreen-player-controls-bottom {
                padding: 10px 16px;
                animation: mobileFullscreenSlideInBottom 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
            }

            .fullscreen-player-controls-bottom .song-info-mini-text {
                max-width: 120px;
            }

            .fullscreen-player.lyrics-mode .fullscreen-back-btn {
                animation: mobileFullscreenSlideInTop 0.4s ease-out 0.1s both;
            }

            .fullscreen-player-controls-bottom .song-info-mini-title {
                font-size: 12px;
            }

            .fullscreen-player-controls-bottom .song-info-mini-artist {
                font-size: 10px;
            }
        }

        @media (max-width: 768px) {
            /* Mobile Fullscreen Player Animations */
            .fullscreen-player {
                animation: mobileFullscreenSlideUp 0.35s cubic-bezier(0.4, 0, 0.2, 1);
                will-change: transform, opacity;
            }

            .fullscreen-player.active {
                animation: mobileFullscreenSlideUp 0.35s cubic-bezier(0.4, 0, 0.2, 1);
                will-change: auto;
            }

            .fullscreen-overlay {
                animation: mobileFadeIn 0.4s ease-out;
                will-change: opacity;
            }

            .fullscreen-close {
                animation: mobileFullscreenSlideInTop 0.4s ease-out 0.2s both;
                will-change: transform, opacity;
            }

            .fullscreen-back-btn {
                animation: mobileFullscreenSlideInTop 0.4s ease-out 0.2s both;
                will-change: transform, opacity;
            }

            .fullscreen-content {
                padding: 16px 12px;
                animation: mobileFullscreenFadeScale 0.4s ease-out 0.1s both;
                will-change: transform, opacity;
            }

            .fullscreen-left {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.2s both;
                will-change: transform, opacity;
            }

            .fullscreen-right {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
                will-change: transform, opacity;
            }

            .fullscreen-album-art {
                width: min(280px, 80vw);
                height: min(280px, 80vw);
                animation: mobileFullscreenScaleIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
                will-change: transform, opacity;
            }

            .fullscreen-song-info {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.4s both;
                will-change: transform, opacity;
            }

            .fullscreen-lyrics-link {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.55s both;
            }

            .fullscreen-progress {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.5s both;
                will-change: transform, opacity;
            }

            .fullscreen-controls {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.6s both;
                will-change: transform, opacity;
            }

            .fullscreen-volume-control {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.7s both;
                will-change: transform, opacity;
            }

            .fullscreen-lyrics {
                animation: mobileFullscreenFadeScale 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.4s both;
                will-change: transform, opacity;
            }

            /* Lyrics View Mode Mobile Animations */
            .fullscreen-player.lyrics-mode {
                animation: mobileFullscreenSlideUp 0.35s cubic-bezier(0.4, 0, 0.2, 1);
                will-change: transform, opacity;
            }

            .fullscreen-player.lyrics-mode .fullscreen-content {
                animation: mobileFullscreenFadeScale 0.3s ease-out both;
                will-change: transform, opacity;
            }

            .fullscreen-player.lyrics-mode .fullscreen-right {
                animation: mobileFullscreenFadeScale 0.4s ease-out 0.1s both;
                will-change: transform, opacity;
            }

            .fullscreen-player.lyrics-mode .fullscreen-lyrics {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.2s both;
                will-change: transform, opacity;
            }

            .fullscreen-player.lyrics-mode .fullscreen-back-btn {
                animation: mobileFullscreenSlideInTop 0.4s ease-out 0.1s both;
                will-change: transform, opacity;
            }

            .fullscreen-player.lyrics-mode .fullscreen-player-controls-bottom {
                animation: mobileFullscreenSlideInBottom 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
                will-change: transform, opacity;
            }

            /* Reset will-change after animation completes */
            .fullscreen-player.active * {
                animation-fill-mode: both;
            }

            .fullscreen-progress {
                max-width: min(280px, 80vw);
                width: min(280px, 80vw);
            }

            .fullscreen-controls {
                width: min(280px, 80vw);
                max-width: min(280px, 80vw);
            }

            .fullscreen-volume-control {
                width: min(280px, 80vw);
                max-width: min(280px, 80vw);
            }

            .fullscreen-song-info {
                max-width: min(280px, 80vw);
            }

            .fullscreen-song-title {
                font-size: 20px;
                letter-spacing: -0.5px;
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.45s both;
            }

            .fullscreen-song-artist {
                animation: mobileFullscreenSlideInBottom 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.5s both;
            }

            .fullscreen-song-artist {
                font-size: 14px;
                letter-spacing: 0.2px;
            }

            .fullscreen-lyrics-link {
                font-size: 11px;
                margin-top: 4px;
            }

            .fullscreen-control-btn {
                width: 36px;
                height: 36px;
                font-size: 12px;
            }

            .fullscreen-control-btn.play-pause {
                width: 48px;
                height: 48px;
                font-size: 18px;
            }

            .fullscreen-lyrics {
                max-height: 300px;
            }

            .lyrics-content {
                font-size: 20px;
                line-height: 2;
            }

            .lyrics-line {
                margin-bottom: 16px;
            }

            .lyrics-line.active {
                transform: translateX(0);
            }

            .lyrics-line.active::before {
                display: none;
            }

            .lyrics-line:hover {
                transform: translateX(0);
            }

            /* Lyrics view mode on small mobile */
            .fullscreen-player.lyrics-mode .fullscreen-content {
                height: 100vh;
                max-height: 100vh;
            }

            .fullscreen-player.lyrics-mode .fullscreen-right {
                height: 100vh;
                max-height: 100vh;
            }

            .fullscreen-player.lyrics-mode .fullscreen-lyrics {
                padding: 50px 16px 60px;
                height: 100vh;
                max-height: 100vh;
            }

            .fullscreen-player.lyrics-mode .lyrics-content {
                font-size: 22px;
                line-height: 2;
            }

            .fullscreen-player.lyrics-mode .fullscreen-back-btn {
                top: 24px;
                left: 24px;
                width: 36px;
                height: 36px;
                font-size: 14px;
            }

            .fullscreen-player.lyrics-mode .fullscreen-player-controls-bottom {
                padding: 8px 12px;
                animation: mobileFullscreenSlideInBottom 0.35s cubic-bezier(0.4, 0, 0.2, 1) 0.25s both;
            }

            .fullscreen-player-controls-bottom .song-info-mini img,
            .fullscreen-player-controls-bottom .song-info-mini #lyricsViewAlbumArt {
                width: 36px;
                height: 36px;
            }

            /* Mobile Touch Interactions */
            .fullscreen-control-btn:active,
            .fullscreen-back-btn:active,
            .fullscreen-close:active,
            .control-btn-mini:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }

            .fullscreen-control-btn.play-pause:active {
                transform: scale(0.9);
            }

            /* Smooth transitions for mobile */
            .fullscreen-player * {
                -webkit-tap-highlight-color: transparent;
                tap-highlight-color: transparent;
            }

            /* Optimize animations for mobile performance */
            .fullscreen-player,
            .fullscreen-content,
            .fullscreen-left,
            .fullscreen-right,
            .fullscreen-album-art,
            .fullscreen-song-info,
            .fullscreen-controls {
                transform: translateZ(0);
                backface-visibility: hidden;
                perspective: 1000px;
            }

            .fullscreen-player-controls-bottom .song-info-mini-text {
                max-width: 100px;
            }

            .fullscreen-player-controls-bottom .song-info-mini-title {
                font-size: 11px;
            }

            .fullscreen-player-controls-bottom .song-info-mini-artist {
                font-size: 9px;
            }

            .fullscreen-player-controls-bottom .control-btn-mini.play-pause {
                width: 32px;
                height: 32px;
                font-size: 11px;
            }

            .fullscreen-player-controls-bottom .control-btn-mini.small {
                width: 24px;
                height: 24px;
                font-size: 12px;
            }

            .fullscreen-player-controls-bottom .time-display-mini {
                font-size: 9px;
                min-width: 28px;
            }

            .fullscreen-player-controls-bottom .progress-bar-wrapper-mini {
                height: 2px;
            }
        }

        .now-playing-art {
            width: 56px;
            height: 56px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .now-playing-art i {
            font-size: 24px;
            color: rgba(255, 255, 255, 0.5);
        }

        .now-playing-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .now-playing-art.has-image i {
            display: none;
        }

        .now-playing-text {
            flex: 1;
            min-width: 0;
        }

        .now-playing-title {
            font-size: 14px;
            font-weight: 500;
            color: white;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .now-playing-artist {
            font-size: 12px;
            color: #b3b3b3;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 120px;
        }

        .volume-icon {
            color: #ffffff;
            font-size: 18px;
            cursor: pointer;
            width: 24px;
            min-width: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .volume-icon:hover {
            color: #ff6b9d;
            transform: scale(1.15);
        }

        .volume-icon i {
            display: inline-block;
            line-height: 1;
        }

        .volume-slider {
            flex: 1;
            height: 6px;
            background: linear-gradient(to right, #ff6b9d 0%, #ff6b9d var(--volume-percent, 70%), #535353 var(--volume-percent, 70%), #535353 100%);
            border-radius: 3px;
            outline: none;
            cursor: pointer;
            -webkit-appearance: none;
            transition: all 0.3s ease;
        }

        .volume-slider:hover {
            height: 8px;
            background: linear-gradient(to right, #ff8fb3 0%, #ff8fb3 var(--volume-percent, 70%), #727272 var(--volume-percent, 70%), #727272 100%);
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: #ff6b9d;
            border-radius: 50%;
            cursor: pointer;
            opacity: 1;
            transition: all 0.2s ease;
            box-shadow: 0 0 0 2px rgba(255, 107, 157, 0.3), 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .volume-slider:hover::-webkit-slider-thumb {
            width: 18px;
            height: 18px;
            box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.4), 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .volume-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #ff6b9d;
            border-radius: 50%;
            cursor: pointer;
            border: none;
            opacity: 1;
            transition: all 0.2s ease;
            box-shadow: 0 0 0 2px rgba(255, 107, 157, 0.3), 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .volume-slider:hover::-moz-range-thumb {
            width: 18px;
            height: 18px;
            box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.4), 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .playlist-section {
            margin-top: 24px;
            animation: fadeIn 0.8s ease-out 0.3s both;
        }

        .section-header {
            display: none; /* Hide section header as title is shown in main header */
        }

        .section-title {
            font-size: 24px;
            font-weight: 700;
            color: white;
            animation: fadeIn 0.6s ease-out;
            display: none; /* Hide section title as it's duplicated in header */
        }

        .period-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .period-tab {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 20px;
            padding: 6px 16px;
            color: white;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .period-tab:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .period-tab.active {
            background: #ff6b9d;
        }

        .period-tab i {
            margin-right: 6px;
        }

        .playlist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 16px;
        }

        .playlist-card {
            background: #181818;
            border-radius: 8px;
            padding: 16px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .playlist-card:hover {
            background: #282828;
        }

        .playlist-card-art {
            width: 100%;
            aspect-ratio: 1;
            background: rgba(255, 107, 157, 0.2);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
        }

        .playlist-card-art i {
            font-size: 48px;
            color: rgba(255, 255, 255, 0.3);
        }

        .playlist-card-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .playlist-card-art.has-image i {
            display: none;
        }

        .play-button-overlay {
            position: absolute;
            bottom: 8px;
            right: 8px;
            width: 48px;
            height: 48px;
            background: #ff6b9d;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s, transform 0.2s;
            transform: translateY(8px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 18px;
        }

        .playlist-card:hover .play-button-overlay {
            opacity: 1;
            transform: translateY(0);
        }

        .playlist-card-title {
            font-size: 16px;
            font-weight: 600;
            color: white;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .playlist-card-artist {
            font-size: 14px;
            color: #b3b3b3;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .playlist-list {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .playlist-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .playlist-list:not(.no-animate) .playlist-item {
            opacity: 0;
            animation: slideInRight 0.4s ease-out forwards;
            transform: translateX(-20px);
        }

        .playlist-list:not(.no-animate) .playlist-item:nth-child(1) { animation-delay: 0.05s; }
        .playlist-list:not(.no-animate) .playlist-item:nth-child(2) { animation-delay: 0.1s; }
        .playlist-list:not(.no-animate) .playlist-item:nth-child(3) { animation-delay: 0.15s; }
        .playlist-list:not(.no-animate) .playlist-item:nth-child(4) { animation-delay: 0.2s; }
        .playlist-list:not(.no-animate) .playlist-item:nth-child(5) { animation-delay: 0.25s; }
        .playlist-list:not(.no-animate) .playlist-item:nth-child(6) { animation-delay: 0.3s; }
        .playlist-list:not(.no-animate) .playlist-item:nth-child(7) { animation-delay: 0.35s; }
        .playlist-list:not(.no-animate) .playlist-item:nth-child(8) { animation-delay: 0.4s; }
        .playlist-list:not(.no-animate) .playlist-item:nth-child(9) { animation-delay: 0.45s; }
        .playlist-list:not(.no-animate) .playlist-item:nth-child(10) { animation-delay: 0.5s; }
        .playlist-list:not(.no-animate) .playlist-item:nth-child(n+11) { animation-delay: 0.55s; }

        .playlist-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .playlist-item.playing {
            background: rgba(255, 107, 157, 0.15);
        }

        .playlist-item-number {
            width: 24px;
            text-align: center;
            font-size: 16px;
            color: #b3b3b3;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .playlist-item.playing .playlist-item-number {
            color: #ff6b9d;
        }

        .playlist-item-number span {
            display: inline-block;
        }

        .playlist-item.playing .playlist-item-number span {
            display: none;
        }

        .playing-indicator {
            display: none;
            align-items: center;
            gap: 4px;
            width: 24px;
            justify-content: center;
        }

        .playlist-item.playing .playing-indicator {
            display: flex;
        }

        .equalizer-bars {
            display: flex;
            align-items: flex-end;
            gap: 2px;
            height: 16px;
        }

        .equalizer-bar {
            width: 3px;
            background: #ff6b9d;
            border-radius: 2px;
            animation: equalizer 1s ease-in-out infinite;
        }

        .equalizer-bar:nth-child(1) {
            height: 8px;
            animation-delay: 0s;
        }

        .equalizer-bar:nth-child(2) {
            height: 12px;
            animation-delay: 0.2s;
        }

        .equalizer-bar:nth-child(3) {
            height: 16px;
            animation-delay: 0.4s;
        }

        .equalizer-bar:nth-child(4) {
            height: 10px;
            animation-delay: 0.6s;
        }

        @keyframes equalizer {
            0%, 100% {
                transform: scaleY(0.5);
            }
            50% {
                transform: scaleY(1);
            }
        }

        /* Mobile-specific animations */
        @keyframes mobileRipple {
            0% {
                transform: scale(0);
                opacity: 0.6;
            }
            100% {
                transform: scale(4);
                opacity: 0;
            }
        }

        @keyframes mobileTap {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(0.95);
            }
            100% {
                transform: scale(1);
            }
        }

        @keyframes mobileSlideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes mobileSlideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes mobileBounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes mobileShake {
            0%, 100% {
                transform: translateX(0);
            }
            25% {
                transform: translateX(-5px);
            }
            75% {
                transform: translateX(5px);
            }
        }

        @keyframes mobileGlow {
            0%, 100% {
                box-shadow: 0 0 10px rgba(255, 107, 157, 0.3);
            }
            50% {
                box-shadow: 0 0 20px rgba(255, 107, 157, 0.6);
            }
        }

        @keyframes mobilePulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
        }

        @keyframes mobileRotate {
            from {
                transform: rotate(0deg) scale(1);
            }
            to {
                transform: rotate(360deg) scale(1);
            }
        }

        @keyframes mobileFadeScale {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes mobileSlideLeft {
            0% {
                transform: translateX(0);
            }
            50% {
                transform: translateX(-20px);
                opacity: 0.7;
            }
            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes mobileSlideRight {
            0% {
                transform: translateX(0);
            }
            50% {
                transform: translateX(20px);
                opacity: 0.7;
            }
            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes mobileLoading {
            0% {
                transform: rotate(0deg);
                opacity: 0.5;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: rotate(360deg);
                opacity: 0.5;
            }
        }

        @keyframes mobileFadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* Mobile Fullscreen Player Animations */
        @keyframes mobileFullscreenSlideUp {
            from {
                opacity: 0;
                transform: translateY(100%);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes mobileFullscreenFadeScale {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes mobileFullscreenSlideInBottom {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes mobileFullscreenSlideInTop {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes mobileFullscreenScaleIn {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes mobileFullscreenBackdrop {
            from {
                opacity: 0;
                backdrop-filter: blur(0px);
            }
            to {
                opacity: 1;
                backdrop-filter: blur(20px);
            }
        }

        .playlist-item-art {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
            border-radius: 4px;
            overflow: hidden;
        }

        .playlist-item:hover .playlist-item-art {
            transform: scale(1.1);
        }

        .playlist-item-art i {
            font-size: 20px;
            color: rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
        }

        .playlist-item-art img {
            transition: transform 0.3s ease;
        }

        .playlist-item:hover .playlist-item-art img {
            transform: scale(1.1);
        }

        .playlist-item-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .playlist-item-art.has-image i {
            display: none;
        }

        .playlist-item-info {
            flex: 1;
            min-width: 0;
        }

        .playlist-item-title {
            font-size: 16px;
            font-weight: 500;
            color: white;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .playlist-item-artist {
            font-size: 14px;
            color: #b3b3b3;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .playlist-item-duration {
            font-size: 14px;
            color: #b3b3b3;
            min-width: 50px;
            text-align: right;
        }

        @media (max-width: 1024px) {
            .song-title-large {
                font-size: 48px;
            }

            .album-art-large {
                width: 180px;
                height: 180px;
            }
        }

        @media (max-width: 768px) {
            /* Mobile Animation Enhancements */
            .main-container {
                animation: mobileSlideUp 0.5s ease-out;
            }

            /* Top Bar Mobile */
            .top-bar {
                padding: 12px 16px;
                flex-wrap: wrap;
                animation: mobileSlideDown 0.4s ease-out;
            }

            .player-brand {
                font-size: 16px;
                margin-right: 12px;
            }

            .main-tabs {
                overflow-x: auto;
                overflow-y: hidden;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
                flex: 1;
                min-width: 0;
            }

            .main-tabs::-webkit-scrollbar {
                display: none;
            }

            .main-tab {
                padding: 8px 16px;
                font-size: 13px;
                white-space: nowrap;
                flex-shrink: 0;
                position: relative;
                overflow: hidden;
                -webkit-tap-highlight-color: transparent;
            }

            .main-tab:active {
                animation: mobileTap 0.2s ease-out;
                transform: scale(0.95);
            }

            .main-tab.active {
                /* No pulse animation */
            }

            .user-profile {
                display: none;
            }

            /* Content Area Mobile */
            .content-area {
                padding: 16px;
            }

            /* Now Playing Section Mobile */
            .now-playing-section {
                flex-direction: column;
                align-items: flex-start;
                text-align: left;
                gap: 16px;
                margin-bottom: 24px;
                padding-top: 8px;
                animation: mobileFadeScale 0.6s ease-out;
            }

            .album-art-large {
                width: 200px;
                height: 200px;
                animation: mobileFadeScale 0.8s ease-out 0.2s both;
                transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .album-art-large:active {
                transform: scale(0.95);
            }

            .album-art-large.playing {
                animation: mobileGlow 3s ease-in-out infinite;
            }

            .song-details {
                width: 100%;
                padding-bottom: 0;
            }

            .song-type {
                font-size: 11px;
                margin-bottom: 6px;
            }

            .song-title-large {
                font-size: 28px;
                line-height: 1.1;
                margin-bottom: 8px;
                animation: mobileSlideUp 0.5s ease-out 0.3s both;
            }

            .song-artist-large {
                font-size: 14px;
                margin-bottom: 16px;
                animation: mobileSlideUp 0.5s ease-out 0.4s both;
            }

            .header-actions {
                gap: 8px;
                margin-top: 12px;
            }

            .action-btn {
                padding: 10px 16px;
                font-size: 13px;
            }

            .action-btn#playHeaderBtn {
                padding: 10px 24px;
            }

            .action-btn span {
                display: inline;
            }

            .action-btn.outline span {
                display: inline;
            }

            /* Playlist Mobile */
            .playlist-section {
                margin-top: 16px;
            }

            .section-title {
                font-size: 20px;
            }

            .playlist-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 12px;
            }

            .playlist-card {
                padding: 12px;
            }

            .playlist-card-art {
                margin-bottom: 12px;
            }

            .playlist-list {
                gap: 8px;
            }

            .playlist-item {
                padding: 12px;
                border-radius: 8px;
                position: relative;
                overflow: hidden;
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }

            .playlist-item::before {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                width: 0;
                height: 0;
                border-radius: 50%;
                background: rgba(255, 107, 157, 0.3);
                transform: translate(-50%, -50%);
                transition: width 0.3s, height 0.3s;
            }

            .playlist-item:active::before {
                width: 200px;
                height: 200px;
                animation: mobileRipple 0.4s ease-out;
            }

            .playlist-item:active {
                transform: scale(0.98);
                background: rgba(255, 107, 157, 0.2);
            }

            /* Player Controls Mobile */
            .player-controls {
                padding: 12px 16px;
                gap: 10px;
            }

            .progress-section {
                gap: 8px;
            }

            .time-display {
                font-size: 10px;
                min-width: 35px;
            }

            .progress-bar-wrapper {
                height: 5px;
            }

            .progress-bar-wrapper:hover {
                height: 6px;
            }

            /* Control Buttons Mobile */
            .control-buttons {
                gap: 12px;
                flex: 1;
                justify-content: center;
            }

            .control-btn {
                position: relative;
                overflow: hidden;
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }

            .control-btn::after {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                width: 0;
                height: 0;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.2);
                transform: translate(-50%, -50%);
                transition: width 0.3s, height 0.3s;
            }

            .control-btn:active::after {
                width: 100px;
                height: 100px;
                animation: mobileRipple 0.3s ease-out;
            }

            .control-btn:active {
                animation: mobileTap 0.15s ease-out;
            }

            .control-btn.small {
                font-size: 14px;
                width: 36px;
                height: 36px;
            }

            .control-btn.medium {
                font-size: 18px;
                width: 36px;
                height: 36px;
            }

            .control-btn.play-pause {
                width: 48px;
                height: 48px;
                font-size: 16px;
            }

            .control-btn.play-pause.playing {
                /* No animation */
            }

            /* Now Playing Info Mobile - Collapsed by default */
            .now-playing-info {
                min-width: 0;
                max-width: 140px;
                gap: 8px;
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }

            .now-playing-info:active {
                animation: mobileTap 0.2s ease-out;
            }

            .now-playing-art {
                width: 48px;
                height: 48px;
                flex-shrink: 0;
                transition: transform 0.3s ease;
            }

            .now-playing-art:active {
                transform: scale(0.9);
            }

            .now-playing-art.playing {
                /* No animation when playing */
            }

            .now-playing-art i {
                font-size: 20px;
            }

            .now-playing-title {
                font-size: 13px;
            }

            .now-playing-artist {
                font-size: 11px;
            }

            /* Hide volume control completely on mobile */
            .volume-control {
                display: none !important;
            }

            /* Progress bar mobile animations */
            .progress-bar-wrapper {
                touch-action: none;
            }

            .progress-bar-wrapper:active .progress-bar {
                animation: mobileGlow 0.5s ease-in-out;
            }

            /* Playlist cards mobile animations */
            .playlist-card {
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
                transition: transform 0.2s ease, box-shadow 0.2s ease;
            }

            .playlist-card:active {
                transform: scale(0.97);
                box-shadow: 0 4px 12px rgba(255, 107, 157, 0.3);
            }

            /* Smooth scroll animations */
            .playlist-list {
                -webkit-overflow-scrolling: touch;
            }

            /* Album art touch feedback */
            .album-art-large img {
                transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .album-art-large:active img {
                transform: scale(0.95);
            }

            /* Mobile loading state */
            .album-art-large.loading {
                animation: mobileLoading 1s linear infinite;
            }

            /* Mobile playlist item loading */
            .playlist-item.loading {
                opacity: 0.6;
                pointer-events: none;
            }

            /* Mobile smooth transitions */
            * {
                -webkit-tap-highlight-color: rgba(255, 107, 157, 0.2);
            }

            /* Mobile button press feedback */
            .control-btn:active,
            .playlist-item:active,
            .playlist-card:active {
                transform: scale(0.95);
            }

            /* Mobile progress bar touch feedback */
            .progress-bar-wrapper:active {
                transform: scaleY(1.2);
            }
        }

        @media (max-width: 480px) {
            /* Extra Small Mobile */
            .top-bar {
                padding: 10px 12px;
                animation: mobileSlideDown 0.3s ease-out;
            }

            .player-brand {
                font-size: 14px;
                margin-right: 8px;
            }

            .main-tab {
                padding: 6px 12px;
                font-size: 12px;
            }

            .main-tab:active {
                animation: mobileTap 0.15s ease-out;
            }

            .content-area {
                padding: 12px;
            }

            .album-art-large {
                width: 160px;
                height: 160px;
                animation: mobileFadeScale 0.7s ease-out 0.1s both;
            }

            .song-title-large {
                font-size: 24px;
                animation: mobileSlideUp 0.4s ease-out 0.2s both;
            }

            .song-artist-large {
                font-size: 13px;
                animation: mobileSlideUp 0.4s ease-out 0.3s both;
            }

            .header-actions {
                gap: 6px;
            }

            .action-btn {
                padding: 8px 12px;
                font-size: 12px;
            }

            .action-btn#playHeaderBtn {
                padding: 8px 16px;
            }

            .action-btn span {
                display: none;
            }

            .action-btn.outline span {
                display: inline;
            }

            .action-btn#playHeaderBtn span {
                display: inline;
            }

            .playlist-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 10px;
            }

            .playlist-card {
                padding: 10px;
            }

            .playlist-card:active {
                transform: scale(0.96);
            }

            .player-controls {
                padding: 10px 12px;
                animation: mobileSlideUp 0.5s ease-out;
            }

            .control-btn.small {
                width: 32px;
                height: 32px;
                font-size: 13px;
            }

            .control-btn.medium {
                width: 32px;
                height: 32px;
                font-size: 16px;
            }

            .control-btn.play-pause {
                width: 44px;
                height: 44px;
                font-size: 15px;
            }

            .control-btn.play-pause:active {
                /* No bounce animation */
            }

            .now-playing-info {
                max-width: 120px;
            }

            .now-playing-art {
                width: 40px;
                height: 40px;
            }

            .now-playing-title {
                font-size: 12px;
            }

            .now-playing-artist {
                font-size: 10px;
            }

            .time-display {
                font-size: 9px;
                min-width: 30px;
            }
        }
    </style>
</head>

<body>
    <div class="main-container">
        <div class="top-bar">
            <div style="display: flex; align-items: center;">
                <div class="player-brand">
                    <i class="fas fa-heart" style="margin-right: 8px; color: #ff6b9d; animation: pulseHeart 1.2s ease-in-out infinite;"></i>MH Station
                </div>
                <div class="main-tabs">
                    <div class="main-tab active" data-tab="you-and-me">You and Me</div>
                    <div class="main-tab" data-tab="period-mix">Period Mix</div>
                    <div class="main-tab" data-tab="valentine" id="valentine-tab" style="display: none;">💕 Valentine</div>
                </div>
            </div>
        </div>

        <div class="content-area">
            <div class="now-playing-section">
                <div class="album-art-large" id="albumArt">
                    <i class="fas fa-music"></i>
                    <img id="albumImage" src="" alt="Album Art" style="display: none;">
                </div>
                <div class="song-details">
                    <div class="song-type">Playlist</div>
                    <div class="song-title-large" id="currentTitle">You and Me</div>
                    <div class="song-artist-large" id="currentArtist"></div>
                    <div class="header-actions">
                        <button class="action-btn outline" id="shuffleHeaderBtn" title="Shuffle">
                            <i class="fas fa-random"></i>
                            <span>Shuffle</span>
                        </button>
                        <button class="action-btn" id="playHeaderBtn" title="Play All">
                            <i class="fas fa-play"></i>
                            <span>Play</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="playlist-section" id="period-mix-section" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">Period Mix</h2>
                </div>
                <div class="playlist-list" id="playlist"></div>
            </div>

            <div class="playlist-section" id="you-and-me-section">
                <div class="section-header">
                    <h2 class="section-title">You and Me</h2>
                </div>
                <div class="playlist-list" id="you-and-me-playlist"></div>
            </div>

            <div class="playlist-section" id="valentine-section" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">💕 Valentine</h2>
                </div>
                <div class="playlist-list" id="valentine-playlist"></div>
            </div>
        </div>

        <div class="player-controls">
            <div class="progress-section">
                <span class="time-display" id="currentTime">0:00</span>
                <div class="progress-bar-wrapper" id="progressContainer">
                    <div class="progress-bar-fill" id="progressBar"></div>
                </div>
                <span class="time-display" id="duration">0:00</span>
            </div>
            <div style="display: flex; align-items: center; justify-content: space-between;">
                <div class="now-playing-info">
                    <div class="now-playing-art" id="miniAlbumArt">
                        <i class="fas fa-music"></i>
                        <img id="miniAlbumImage" src="" alt="" style="display: none;">
                    </div>
                    <div class="now-playing-text">
                        <div class="now-playing-title" id="miniTitle">You and Me</div>
                        <div class="now-playing-artist" id="miniArtist"></div>
                    </div>
                </div>
                <div class="control-buttons">
                    <button class="control-btn small" id="shuffleBtn" title="Shuffle"><i class="fas fa-random"></i></button>
                    <button class="control-btn medium" id="prevBtn" title="Previous"><i class="fas fa-step-backward"></i></button>
                    <button class="control-btn play-pause" id="playBtn" title="Play/Pause"><i class="fas fa-play"></i></button>
                    <button class="control-btn medium" id="nextBtn" title="Next"><i class="fas fa-step-forward"></i></button>
                    <button class="control-btn small" id="repeatBtn" title="Repeat"><i class="fas fa-redo"></i></button>
                </div>
                <div class="volume-control">
                    <span class="volume-icon"><i class="fas fa-volume-up"></i></span>
                    <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="70">
                </div>
            </div>
        </div>
    </div>

    <!-- Full Screen Player -->
    <div class="fullscreen-player" id="fullscreenPlayer">
        <div class="fullscreen-overlay"></div>
        <button class="fullscreen-close" id="closeFullscreen">
            <i class="fas fa-times"></i>
        </button>
        <button class="fullscreen-back-btn" id="fullscreenBackBtn" title="Back">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="fullscreen-content">
            <div class="fullscreen-left">
                <div class="fullscreen-album-art" id="fullscreenAlbumArt">
                    <i class="fas fa-music"></i>
                    <img id="fullscreenAlbumImage" src="" alt="" style="display: none;">
                </div>
                <div class="fullscreen-song-info">
                    <div class="fullscreen-song-title" id="fullscreenTitle">Select a song</div>
                    <div class="fullscreen-song-artist" id="fullscreenArtist"></div>
                    <div class="fullscreen-lyrics-link" id="fullscreenLyricsLink">Lyrics</div>
                </div>
                <div class="fullscreen-progress">
                    <div class="fullscreen-progress-bar" id="fullscreenProgressContainer">
                        <div class="fullscreen-progress-fill" id="fullscreenProgressBar"></div>
                    </div>
                    <div class="fullscreen-time-info">
                        <span id="fullscreenCurrentTime">0:00</span>
                        <span id="fullscreenDuration">0:00</span>
                    </div>
                </div>
                <div class="fullscreen-controls">
                    <button class="fullscreen-control-btn" id="fullscreenShuffleBtn">
                        <i class="fas fa-random"></i>
                    </button>
                    <button class="fullscreen-control-btn" id="fullscreenPrevBtn">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="fullscreen-control-btn play-pause" id="fullscreenPlayBtn">
                        <i class="fas fa-play"></i>
                    </button>
                    <button class="fullscreen-control-btn" id="fullscreenNextBtn">
                        <i class="fas fa-step-forward"></i>
                    </button>
                    <button class="fullscreen-control-btn" id="fullscreenRepeatBtn">
                        <i class="fas fa-redo"></i>
                    </button>
                </div>
                <div class="fullscreen-volume-control">
                    <span class="fullscreen-volume-icon"><i class="fas fa-volume-up"></i></span>
                    <input type="range" class="fullscreen-volume-slider" id="fullscreenVolumeSlider" min="0" max="100" value="70">
                </div>
            </div>
            <div class="fullscreen-right">
                <div class="fullscreen-lyrics">
                    <div class="lyrics-title">Lyrics</div>
                    <div class="lyrics-content" id="lyricsContent">
                        Select a song to view lyrics
                    </div>
                </div>
            </div>
        </div>
        <!-- Lyrics View Bottom Controls -->
        <div class="fullscreen-player-controls-bottom">
            <div class="song-info-mini">
                <div id="lyricsViewAlbumArt" style="width: 40px; height: 40px; background: rgba(255, 255, 255, 0.1); border-radius: 6px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; position: relative; overflow: hidden;">
                    <i class="fas fa-music" style="font-size: 18px; color: rgba(255, 255, 255, 0.5);"></i>
                    <img id="lyricsViewAlbumImage" src="" alt="" style="display: none; width: 100%; height: 100%; object-fit: cover; border-radius: 6px; position: absolute; top: 0; left: 0;">
                </div>
                <div class="song-info-mini-text">
                    <div class="song-info-mini-title" id="lyricsViewTitle">Select a song</div>
                    <div class="song-info-mini-artist" id="lyricsViewArtist"></div>
                </div>
            </div>
            <div class="progress-section-mini">
                <span class="time-display-mini" id="lyricsViewCurrentTime">0:00</span>
                <div class="progress-bar-wrapper-mini" id="lyricsViewProgressContainer">
                    <div class="progress-bar-fill-mini" id="lyricsViewProgressBar"></div>
                </div>
                <span class="time-display-mini" id="lyricsViewDuration">0:00</span>
            </div>
            <div class="control-buttons-mini">
                <button class="control-btn-mini small" id="lyricsViewPrevBtn" title="Previous">
                    <i class="fas fa-step-backward"></i>
                </button>
                <button class="control-btn-mini play-pause" id="lyricsViewPlayBtn" title="Play/Pause">
                    <i class="fas fa-play"></i>
                </button>
                <button class="control-btn-mini small" id="lyricsViewNextBtn" title="Next">
                    <i class="fas fa-step-forward"></i>
                </button>
            </div>
        </div>
    </div>

    <audio id="audioPlayer"></audio>

    <script>
        // Check if today is February 14th at 12:01 AM or later
        function isValentineDay() {
            const now = new Date();
            const month = now.getMonth() + 1; // getMonth() returns 0-11
            const date = now.getDate();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            
            // February 14th, and time is 12:01 AM (00:01) or later
            if (month === 2 && date === 14) {
                // If it's February 14th, check if it's past 12:01 AM
                if (hours > 0 || (hours === 0 && minutes >= 1)) {
                    return true;
                }
            }
            
            // Also allow if it's past February 14th
            if (month === 2 && date > 14) {
                return true;
            }
            
            // Or if it's March or later (still February 14th or later in the year)
            if (month > 2) {
                return true;
            }
            
            return false;
        }

        // Show/hide Valentine tab based on date
        function toggleValentineTab() {
            const valentineTab = document.getElementById('valentine-tab');
            if (valentineTab) {
                if (isValentineDay()) {
                    valentineTab.style.display = '';
                } else {
                    valentineTab.style.display = 'none';
                    // If Valentine tab is active but it's not Feb 14 12:01 AM or later, switch to You and Me
                    if (valentineTab.classList.contains('active')) {
                        valentineTab.classList.remove('active');
                        const youAndMeTab = document.querySelector('.main-tab[data-tab="you-and-me"]');
                        if (youAndMeTab) {
                            youAndMeTab.classList.add('active');
                            youAndMeTab.click();
                        }
                    }
                }
            }
        }

        // Run on page load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', toggleValentineTab);
        } else {
            toggleValentineTab();
        }

        const songs = [
            {
                title: "Die For You",
                artist: "The Weeknd",
                src: "public/songs/playlists/you-and-me/Die For You - The Weeknd.mp3",
                albumCover: null,
                period: "romantic",
                duration: "4:20",
                lyrics: "I'm findin' ways to articulate the feelin' I'm goin' through\nI just can't say I don't love you\n'Cause I love you, yeah\n\nIt's hard for me to communicate the thoughts that I hold\nBut tonight I'm gon' let you know\nLet me tell the truth\n\nBaby, let me tell the truth, yeah\n\nBaby, I would die for you, you know\nI would die for you, yeah\nAnd all these other things I do for you\nAin't for anybody else\nAnd I'm open wide\nAnd I know you'll see the other side of me\nYou'll see the other side of me\n\nI would die for you, I would lie for you\nKeep it real with you, I would kill for you, my baby\nI'm just sayin', yeah\nI would die for you, I would lie for you\nKeep it real with you, I would kill for you, my baby\nNa-na-na, na-na-na, na-na-na\n\nEven though we're going through it\nAnd it makes you feel alone\nJust know that I would die for you\nBaby, I would die for you, yeah\n\nThe distance and the time between us\nIt'll never change my mind, 'cause baby\nI would die for you, baby, I would die for you, yeah"
            },
            {
                title: "Often (Kygo Remix)",
                artist: "The Weeknd",
                src: "public/songs/playlists/you-and-me/Often (Kygo Remix) - The Weeknd.mp3",
                albumCover: null,
                period: "energetic",
                duration: "4:12",
                lyrics: "Girl, I'm just tryna get you out the friend zone\n'Cause you look even better than the photos\nI can't find your house, send me the info\nDrivin' through the gated residential\n\nFound myself screamin' in the hotel lobby\nCan't take it back, not sorry\nI'm loose, I'm on fire\nGot these feelings, yeah, I'm on fire\n\nOften, often, often, often\nOften, often, often, often\nOften, often, often, often\nOften, often, often, often\n\nOften, often, often, often\nOften, often, often, often\nOften, often, often, often\nOften, often, often, often"
            },
            {
                title: "Blinding Lights",
                artist: "The Weeknd",
                src: "public/songs/playlists/you-and-me/The Weeknd - Blinding Lights (Official Audio) - TheWeekndVEVO.mp3",
                albumCover: null,
                period: "energetic",
                duration: "3:20",
                lyrics: "I've been tryna call\nI've been on my own for long enough\nMaybe you can show me how to love, maybe\n\nI'm going through withdrawals\nYou don't even have to do too much\nYou can turn me on with just a touch, baby\n\nI look around and Sin City's cold and empty (oh)\nNo one's around to judge me (oh)\nI can't see clearly when you're gone\n\nI said, ooh, I'm blinded by the lights\nNo, I can't sleep until I feel your touch\nI said, ooh, I'm drowning in the night\nOh, when I'm like this, you're the one I trust\n\nHey, hey, hey\n\nI'm running out of time\n'Cause I can see the sun light up the sky\nSo I hit the road in overdrive, baby, oh\n\nThe city's cold and empty, no one's around to judge me, oh\nI can't see clearly when you're gone\n\nI said, ooh, I'm blinded by the lights\nNo, I can't sleep until I feel your touch\nI said, ooh, I'm drowning in the night\nOh, when I'm like this, you're the one I trust\n\nI'm just walking by to let you know (by to let you know)\nI can never say it on the phone (say it on the phone)\nWill never let you go this time (ooh)\n\nI said, ooh, I'm blinded by the lights\nNo, I can't sleep until I feel your touch"
            },
            {
                title: "Into You",
                artist: "Ariana Grande",
                src: "public/songs/playlists/you-and-me/Ariana Grande - Into You (Official Video).mp3",
                albumCover: null,
                period: "energetic",
                duration: "3:41",
                lyrics: ""
            },
            {
                title: "Love Me Harder",
                artist: "Ariana Grande, The Weeknd",
                src: "public/songs/playlists/you-and-me/Ariana Grande, The Weeknd - Love Me Harder - ArianaGrandeVevo.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:56",
                lyrics: ""
            },
            {
                title: "Rock Bottom",
                artist: "Hailee Steinfeld",
                src: "public/songs/playlists/you-and-me/Hailee Steinfeld - Rock Bottom (Official Audio).mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:18",
                lyrics: ""
            },
            {
                title: "Capital Letters",
                artist: "Hailee Steinfeld, BloodPop®",
                src: "public/songs/playlists/you-and-me/Hailee Steinfeld, BloodPop® - Capital Letters - FiftyShadesVEVO (1).mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:39",
                lyrics: ""
            },
            {
                title: "Falling Like The Stars",
                artist: "James Arthur",
                src: "public/songs/playlists/you-and-me/James Arthur - Falling Like The Stars (Lyric Video).mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:32",
                lyrics: ""
            },
            {
                title: "Want To Want Me",
                artist: "Jason Derulo",
                src: "public/songs/playlists/you-and-me/Jason Derulo Want To Want Me (Official Audio) - Jason Derulo.mp3",
                albumCover: null,
                period: "energetic",
                duration: "3:27",
                lyrics: ""
            },
            {
                title: "Wherever You Are",
                artist: "Kodaline",
                src: "public/songs/playlists/you-and-me/Kodaline - Wherever You Are (Official Lyric Video).mp3",
                albumCover: null,
                period: "romantic",
                duration: "4:05",
                lyrics: ""
            },
            {
                title: "Shallow",
                artist: "Lady Gaga, Bradley Cooper",
                src: "public/songs/playlists/you-and-me/Lady Gaga, Bradley Cooper - Shallow (from A Star Is Born) (Official Music Video).mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:37",
                lyrics: ""
            },
            {
                title: "I Like Me Better",
                artist: "Lauv",
                src: "public/songs/playlists/you-and-me/Lauv - I Like Me Better [Official Video] - Lauv.mp3",
                albumCover: null,
                period: "chill",
                duration: "3:17",
                lyrics: "I met you in the dark, you lit me up\nYou made me feel as though I was enough\nWe sat there in the park, you knew the rest\nThen you looked at me and said\n\"You're my best friend\"\nAnd I knew what it was\nYou're my best friend\n\nSo I told you that I loved you\nAfter we watched the sunset\nPut my arm around you for the first time\nI said, \"I love you\"\nAnd you told me that you loved me too\n\nI like me better when I'm with you\nI like me better when I'm with you\nI knew from the first time, I'd stay for a long time\n'Cause I like me better when I'm with you"
            },
            {
                title: "Perfect",
                artist: "One Direction",
                src: "public/songs/playlists/you-and-me/One Direction - Perfect (Official Video) - OneDirectionVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:50",
                lyrics: ""
            },
            {
                title: "Let Me",
                artist: "ZAYN",
                src: "public/songs/playlists/you-and-me/ZAYN - Let Me (Lyrics  Lyrics Video).mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:39",
                lyrics: ""
            },
            {
                title: "Dusk Till Dawn",
                artist: "ZAYN & Sia",
                src: "public/songs/playlists/you-and-me/ZAYN & Sia - Dusk Till Dawn (Lyrics) - 7clouds.mp3",
                albumCover: null,
                period: "romantic",
                duration: "4:13",
                lyrics: ""
            },
            {
                title: "I Don't Wanna Live Forever",
                artist: "ZAYN, Taylor Swift",
                src: "public/songs/playlists/you-and-me/ZAYN, Taylor Swift - I Don't Wanna Live Forever (Fifty Shades Darker) - Taylor Swift.mp3",
                albumCover: null,
                period: "romantic",
                duration: "4:05",
                lyrics: ""
            },
            {
                title: "Scars To Your Beautiful",
                artist: "Alessia Cara",
                src: "public/songs/playlists/period_mix/Alessia Cara - Scars To Your Beautiful (Official Audio).mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:50",
                lyrics: "She just wants to be beautiful\nShe goes unnoticed, she knows no limits\nShe craves attention, she praises an image\nShe prays to be sculpted by the sculptor\n\nOh, she don't see the light that's shining\nDeeper than the eyes can find it\nMaybe we have made her blind\nSo she tries to cover up her pain\nAnd cut her woes away\n'Cause covergirls don't cry\nAfter their face is made\n\nBut there's a hope that's waiting for you in the dark\nYou should know you're beautiful just the way you are\nAnd you don't have to change a thing\nThe world could change its heart\nNo scars to your beautiful, we're stars and we're beautiful\n\nAnd you don't have to change a thing\nThe world could change its heart\nNo scars to your beautiful, we're stars and we're beautiful\n\nAnd you don't have to change a thing\nThe world could change its heart\nNo scars to your beautiful, we're stars and we're beautiful"
            },
            {
                title: "Best Part",
                artist: "Daniel Caesar ft. H.E.R.",
                src: "public/songs/playlists/period_mix/Daniel Caesar - Best Part (Audio) ft. H.E.R..mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:29",
                lyrics: "You don't know, babe\nWhen you hold me\nAnd kiss me slowly\nIt's the sweetest thing\nAnd it don't change\nIf I had it my way\nYou would know that you are\n\nYou're the coffee that I need in the morning\nYou're my sunshine in the rain when it's pouring\nWon't you give yourself to me\nGive it all, oh\n\nI just wanna see\nI just wanna see how beautiful you are\nYou know that I see it\nI know you're a star\nWhere you go, I'll follow\nNo matter how far\nIf life is a movie\nThen you're the best part, ooh\nYou're the best part, ooh\nBest part\nIt's you, it's you\n\nIt's this sunrise\nAnd those brown eyes, yes\nYou're the one that I desire\nWhen we wake up\nAnd then we make love\nIt makes me feel so nice\n\nYou're my water when I'm stuck in the desert\nYou're the Tylenol I take when my head hurts\nYou're the sunshine on my life\n\nI just wanna see how beautiful you are\nYou know that I see it\nI know you're a star\nWhere you go, I'll follow\nNo matter how far\nIf life is a movie\nThen you're the best part, oh\nYou're the best part, ooh\nBest part\nIt's you, it's you\n\nIf you love me, won't you say something?\nIf you love me, won't you?\nWon't you?"
            },
            {
                title: "Heat Waves",
                artist: "Glass Animals",
                src: "public/songs/playlists/period_mix/Glass Animals - Heat Waves (Official Video).mp3",
                albumCover: null,
                period: "chill",
                duration: "3:58",
                lyrics: "Road shimmer wiggling the vision\nHeat heat waves I'm swimming in a mirror\nRoad shimmer wiggling the vision\nHeat heat waves I'm swimming in a\n\nSometimes, all I think about is you\nLate nights in the middle of June\nHeat waves been faking me out\nCan't make you happier now\n\nSometimes, all I think about is you\nLate nights in the middle of June\nHeat waves been faking me out\nCan't make you happier now\n\nUsually I put something on TV\nSo we never think about you and me\nBut today I see our reflections clearly\nIn Hollywood, laying on the screen\n\nYou just need a better life than this\nYou need something I can never give\nFake water all across the road\nIt's gone now, the night has come, but\n\nSometimes, all I think about is you\nLate nights in the middle of June\nHeat waves been faking me out\nCan't make you happier now\n\nSometimes, all I think about is you\nLate nights in the middle of June\nHeat waves been faking me out\nCan't make you happier now"
            },
            {
                title: "Adore You",
                artist: "Harry Styles",
                src: "public/songs/playlists/period_mix/Harry Styles - Adore You (Official Audio).mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:27",
                lyrics: "Walk in your rainbow paradise\nStrawberry lipstick state of mind\nI get so lost inside your eyes\nWould it be alright if I just\n\nAdore you\nAdore you\nAdore you\nAdore you\n\nYou don't have to say you love me\nYou don't have to say nothing\nYou don't have to say you're mine\nHoney, I'd walk through fire for you\nJust let me adore you\nLike it's the only thing I'll ever do\nLike it's the only thing I'll ever do\n\nHoney, I'd walk through fire for you\nJust let me adore you\nLike it's the only thing I'll ever do\nLike it's the only thing I'll ever do\n\nAdore you\nAdore you\nAdore you\nAdore you"
            },
            {
                title: "Falling",
                artist: "Harry Styles",
                src: "public/songs/playlists/period_mix/Harry Styles - Falling (Official Video).mp3",
                albumCover: null,
                period: "romantic",
                duration: "4:00",
                lyrics: "I'm in my bed\nAnd you're not here\nAnd there's no one to blame but the drink in my wandering hands\nForget what I said\nIt's not what I meant\nNow I can't take it back\nI can't unpack the baggage you left\n\nWhat am I now?\nWhat am I now?\nWhat if I'm someone I don't want around?\nI'm falling again, I'm falling again, I'm falling\n\nWhat am I now?\nWhat am I now?\nWhat if you're someone I just want around?\nI'm falling again, I'm falling again, I'm falling\n\nYou said you care, and you missed me too\nAnd I'm well aware I write too many songs about you\n\nAnd I fall into your arms\nAnd I fall into your arms\nAnd there's nothing I can do\nAnd there's nothing I can do\n\nI'm falling again, I'm falling again, I'm falling\nI'm falling again, I'm falling again, I'm falling\n\nYou said you care, and you missed me too\nAnd I'm well aware I write too many songs about you"
            },
            {
                title: "Better",
                artist: "Khalid",
                src: "public/songs/playlists/period_mix/Khalid - Better (Official Video).mp3",
                albumCover: null,
                period: "chill",
                duration: "3:49",
                lyrics: "I'm better when I'm dancin'\nI'm better when I'm dancin', yeah, yeah\nI'm better when I'm dancin'\nI'm better when I'm dancin', yeah, yeah\n\nI'm better when I'm dancin'\nI'm better when I'm dancin', yeah, yeah\nI'm better when I'm dancin'\nI'm better when I'm dancin', yeah, yeah\n\nI'm better when I'm dancin'\nI'm better when I'm dancin', yeah, yeah\nI'm better when I'm dancin'\nI'm better when I'm dancin', yeah, yeah\n\nI'm better when I'm dancin'\nI'm better when I'm dancin', yeah, yeah\nI'm better when I'm dancin'\nI'm better when I'm dancin', yeah, yeah"
            },
            {
                title: "All I Want",
                artist: "Kodaline",
                src: "public/songs/playlists/period_mix/Kodaline - All I Want (Lyrics).mp3",
                albumCover: null,
                period: "romantic",
                duration: "5:05",
                lyrics: "All I want is nothing more\nThan to hear you knocking at my door\n'Cause if I could see your face once more\nI could die a happy man I'm sure\n\nWhen you said your last goodbye\nI died a little bit inside\nI lay in tears in bed all night\nAlone without you by my side\n\nBut if you loved me\nWhy'd you leave me?\nTake my body\nTake my body\nAll I want is\nAll I need is\nTo find somebody\nI'll find somebody\nLike you\n\nOh, oh, oh\nLike you\nOh, oh, oh\n\n'Cause you brought out the best of me\nA part of me I'd never seen\nYou took my soul and wiped it clean\nOur love was made for movie screens\n\nBut if you loved me\nWhy'd you leave me?\nTake my body\nTake my body\nAll I want is\nAll I need is\nTo find somebody\nI'll find somebody\nLike you\n\nOh, oh, oh\nLike you\nOh, oh, oh\n\nIf you loved me\nWhy'd you leave me?\nTake my body\nTake my body\nAll I want is\nAll I need is\nTo find somebody\nI'll find somebody\nLike you"
            },
            {
                title: "I Like Me Better",
                artist: "Lauv",
                src: "public/songs/playlists/period_mix/Lauv - I Like Me Better [Official Audio].mp3",
                albumCover: null,
                period: "chill",
                duration: "3:17",
                lyrics: "I met you in the dark, you lit me up\nYou made me feel as though I was enough\nWe sat there in the park, you knew the rest\nThen you looked at me and said\n\"You're my best friend\"\nAnd I knew what it was\nYou're my best friend\n\nSo I told you that I loved you\nAfter we watched the sunset\nPut my arm around you for the first time\nI said, \"I love you\"\nAnd you told me that you loved me too\n\nI like me better when I'm with you\nI like me better when I'm with you\nI knew from the first time, I'd stay for a long time\n'Cause I like me better when I'm with you\n\nI met you in the dark, you lit me up\nYou made me feel as though I was enough\nWe sat there in the park, you knew the rest\nThen you looked at me and said\n\"You're my best friend\"\nAnd I knew what it was\nYou're my best friend\n\nSo I told you that I loved you\nAfter we watched the sunset\nPut my arm around you for the first time\nI said, \"I love you\"\nAnd you told me that you loved me too\n\nI like me better when I'm with you\nI like me better when I'm with you\nI knew from the first time, I'd stay for a long time\n'Cause I like me better when I'm with you"
            },
            {
                title: "Bleeding Love",
                artist: "Leona Lewis",
                src: "public/songs/playlists/period_mix/Leona Lewis - Bleeding Love (Official Video).mp3",
                albumCover: null,
                period: "romantic",
                duration: "4:22",
                lyrics: "Closed off from love\nI didn't need the pain\nOnce or twice was enough\nAnd it was all in vain\nTime starts to pass\nBefore you know it, you're frozen\n\nBut something happened\nFor the very first time with you\nMy heart melts into the ground\nFound something true\nAnd everyone's looking round\nThinking I'm going crazy\n\nBut I don't care what they say\nI'm in love with you\nThey try to pull me away\nBut they don't know the truth\nMy heart's crippled by the vein\nThat I keep on closing\nYou cut me open and I\nKeep bleeding\nKeep, keep bleeding love\n\nI keep bleeding\nI keep, keep bleeding love\n\nYou cut me open\n\nTrying hard not to hear\nBut they talk so loud\nTheir piercing sounds fill my ears\nTry to fill me with doubt\nYet I know that the goal\nIs to keep me from falling\n\nBut nothing's greater\nThan the rush that comes with your embrace\nAnd in this world of loneliness\nI see your face\nYet everyone around me\nThinks that I'm going crazy, maybe, maybe\n\nBut I don't care what they say\nI'm in love with you\nThey try to pull me away\nBut they don't know the truth\nMy heart's crippled by the vein\nThat I keep on closing\nYou cut me open and I\nKeep bleeding\nKeep, keep bleeding love\n\nI keep bleeding\nI keep, keep bleeding love\n\nYou cut me open and I\nKeep bleeding\nKeep, keep bleeding love\n\nOh, you cut me open and I\nKeep bleeding\nKeep, keep bleeding love"
            },
            {
                title: "The Night We Met",
                artist: "Lord Huron",
                src: "public/songs/playlists/period_mix/Lord Huron - The Night We Met (Official Audio).mp3",
                albumCover: null,
                period: "chill",
                duration: "3:28",
                lyrics: "I am not the only traveler\nWho has not repaid his debt\nI've been searching for a trail to follow again\nTake me back to the night we met\n\nAnd then I can tell myself\nWhat the hell I'm supposed to do\nAnd then I can tell myself\nNot to ride along with you\n\nI had all and then most of you\nSome and now none of you\nTake me back to the night we met\nI don't know what I'm supposed to do\nHaunted by the ghost of you\nOh, take me back to the night we met\n\nWhen the night was full of terrors\nAnd your eyes were filled with tears\nWhen you had not touched me yet\nOh, take me back to the night we met\n\nI had all and then most of you\nSome and now none of you\nTake me back to the night we met\nI don't know what I'm supposed to do\nHaunted by the ghost of you\nTake me back to the night we met"
            },
            {
                title: "How Do I Breathe",
                artist: "Mario",
                src: "public/songs/playlists/period_mix/Mario - How Do I Breathe (Official Video).mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:50",
                lyrics: "How do I breathe without you?\nIf you ever go\nHow do I ever, ever survive?\nHow do I, how do I, oh how do I breathe?\n\nHow do I breathe without you?\nIf you ever go\nHow do I ever, ever survive?\nHow do I, how do I, oh how do I breathe?\n\nYou're the air that I breathe\nYou're the air that I breathe\nYou're the air that I breathe\nYou're the air that I breathe\n\nHow do I breathe without you?\nIf you ever go\nHow do I ever, ever survive?\nHow do I, how do I, oh how do I breathe?\n\nYou're the air that I breathe\nYou're the air that I breathe\nYou're the air that I breathe\nYou're the air that I breathe"
            },
            {
                title: "Girls Like You",
                artist: "Maroon 5 ft. Cardi B",
                src: "public/songs/playlists/period_mix/Maroon 5 - Girls Like You ft. Cardi B (Official Music Video).mp3",
                albumCover: null,
                period: "energetic",
                duration: "3:55",
                lyrics: "Spent 24 hours\nI need more hours with you\nYou spent the weekend\nGetting even, ooh ooh\nWe spent the late nights\nMaking things right, between us\nBut now it's all good, babe\nRoll that back wood, babe\nAnd play me close\n\n'Cause girls like you\nRun around with guys like me\n'Til sundown, when I come through\nI need a girl like you, yeah yeah\n\nGirls like you\nLove fun, and yeah, me too\nWhat I want when I come through\nI need a girl like you, yeah yeah\n\nYeah yeah yeah\nYeah yeah yeah\nI need a girl like you, yeah yeah\nYeah yeah yeah\nYeah yeah yeah\nI need a girl like you, yeah yeah\n\nI need a girl like you, yeah yeah\nI need a girl like you, yeah yeah\n\nI need a girl like you\nYeah yeah yeah\nYeah yeah yeah\nI need a girl like you"
            },
            {
                title: "Impossible",
                artist: "Shontelle",
                src: "public/songs/playlists/period_mix/Shontelle - Impossible.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:50",
                lyrics: "I remember years ago\nSomeone told me I should take\nCaution when it comes to love\nI did, I did\n\nAnd you were strong and I was not\nMy illusion, my mistake\nI was careless, I forgot\nI did\n\nAnd now when all is done\nThere is nothing to say\nYou have gone and so effortlessly\nYou have won\nYou can go ahead tell them\nTell them all I know now\nShout it from the roof tops\nWrite it on the sky line\nAll we had is gone now\n\nTell them I was happy\nAnd my heart is broken\nAll my scars are open\nTell them what I hoped would be\nImpossible, impossible\nImpossible, impossible\n\nFalling out of love is hard\nFalling for betrayal is worse\nBroken trust and broken hearts\nI know, I know\n\nAnd thinking all you need is there\nBuilding faith on love and words\nEmpty promises will wear\nI know, I know\n\nAnd now when all is gone\nThere is nothing to say\nYou have gone and so effortlessly\nYou have won\nYou can go ahead tell them\nTell them all I know now\nShout it from the roof tops\nWrite it on the sky line\nAll we had is gone now\n\nTell them I was happy\nAnd my heart is broken\nAll my scars are open\nTell them what I hoped would be\nImpossible, impossible\nImpossible, impossible"
            },
            {
                title: "Until I Found You",
                artist: "Stephen Sanchez",
                src: "public/songs/playlists/period_mix/Stephen Sanchez - Until I Found You (Official Video).mp3",
                albumCover: null,
                period: "romantic",
                duration: "2:56",
                lyrics: "Georgia, wrap me up in all your\nI want you in my arms\nOh, let me hold you\nI'll never let you go again like I did\nOh, I used to say\n\nI would never fall in love again until I found her\nI said, \"I would never fall unless it's you I fall into\"\nI was lost within the darkness, but then I found her\nI found you\n\nGeorgia, pulled me in, I asked to\nLove her once again\nYou fell, I caught you\nI'll never let you go again like I did\nOh, I used to say\n\nI would never fall in love again until I found her\nI said, \"I would never fall unless it's you I fall into\"\nI was lost within the darkness, but then I found her\nI found you"
            },
            {
                title: "Saturn",
                artist: "SZA",
                src: "public/songs/playlists/period_mix/SZA - Saturn.mp3",
                albumCover: null,
                period: "chill",
                duration: "3:06",
                lyrics: "Saturn\nSaturn\nSaturn\nSaturn\n\nHow many times can I reinvent before I'm gone?\nHow many lives can I live?\nHow many times can I die?\n\nSaturn\nSaturn\nSaturn\nSaturn\n\nHow many times can I reinvent before I'm gone?\nHow many lives can I live?\nHow many times can I die?\n\nSaturn\nSaturn\nSaturn\nSaturn"
            },
            {
                title: "Perfect",
                artist: "Ed Sheeran",
                src: "public/songs/playlists/valentines/Ed Sheeran - Perfect - LatinHype.mp3",
                albumCover: null,
                period: "romantic",
                duration: "4:23",
                lyrics: "I found a love for me\nDarling, just dive right in\nAnd follow my lead\nWell, I found a girl, beautiful and sweet\nI never knew you were the someone waiting for me\n\n'Cause we were just kids when we fell in love\nNot knowing what it was\nI will not give you up this time\nBut darling, just kiss me slow, your heart is all I own\nAnd in your eyes, you're holding mine\n\nBaby, I'm dancing in the dark with you between my arms\nBarefoot on the grass, listening to our favorite song\nWhen you said you looked a mess, I whispered underneath my breath\nBut you heard it, darling, you look perfect tonight\n\nWell I found a woman, stronger than anyone I know\nShe shares my dreams, I hope that someday I'll share her home\nI found a love, to carry more than just my secrets\nTo carry love, to carry children of our own\n\nWe are still kids, but we're so in love\nFighting against all odds\nI know we'll be alright this time\nDarling, just hold my hand\nBe my girl, I'll be your man\nI see my future in your eyes\n\nBaby, I'm dancing in the dark, with you between my arms\nBarefoot on the grass, listening to our favorite song\nWhen I saw you in that dress, looking so beautiful\nI don't deserve this, darling, you look perfect tonight\n\nBaby, I'm dancing in the dark, with you between my arms\nBarefoot on the grass, listening to our favorite song\nI have faith in what I see\nNow I know I have met an angel in person\nAnd she looks perfect\nI don't deserve this\nYou look perfect tonight"
            },
            {
                title: "Heaven",
                artist: "Kane Brown",
                src: "public/songs/playlists/valentines/Kane Brown - Heaven (Official Video) - KaneBrownVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "2:59",
                lyrics: "I found a love for me\nDarling, just dive right in\nAnd follow my lead\nWell, I found a girl, beautiful and sweet\nI never knew you were the someone waiting for me\n\n'Cause we were just kids when we fell in love\nNot knowing what it was\nI will not give you up this time\nBut darling, just kiss me slow, your heart is all I own\nAnd in your eyes, you're holding mine\n\nBaby, I'm dancing in the dark with you between my arms\nBarefoot on the grass, listening to our favorite song\nWhen you said you looked a mess, I whispered underneath my breath\nBut you heard it, darling, you look perfect tonight"
            },
            {
                title: "Thank God",
                artist: "Kane Brown, Katelyn Brown",
                src: "public/songs/playlists/valentines/Kane Brown, Katelyn Brown - Thank God (Official Music Video) - KaneBrownVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "2:54",
                lyrics: "I found a love for me\nDarling, just dive right in\nAnd follow my lead\nWell, I found a girl, beautiful and sweet\nI never knew you were the someone waiting for me"
            },
            {
                title: "Out of Time",
                artist: "The Weeknd",
                src: "public/songs/playlists/valentines/The Weeknd - Out of Time - TheWeekndVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:34",
                lyrics: "I found a love for me\nDarling, just dive right in\nAnd follow my lead\nWell, I found a girl, beautiful and sweet\nI never knew you were the someone waiting for me"
            },
            {
                title: "Die For You (Remix)",
                artist: "The Weeknd, Ariana Grande",
                src: "public/songs/playlists/valentines/The Weeknd, Ariana Grande - Die For You (Remix _ Lyric Video) - TheWeekndVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:52",
                lyrics: "I'm findin' ways to articulate the feelin' I'm goin' through\nI just can't say I don't love you\n'Cause I love you, yeah\n\nIt's hard for me to communicate the thoughts that I hold\nBut tonight I'm gon' let you know\nLet me tell the truth\n\nBaby, let me tell the truth, yeah\n\nBaby, I would die for you, you know\nI would die for you, yeah\nAnd all these other things I do for you\nAin't for anybody else"
            },
            {
                title: "Under The Influence",
                artist: "Chris Brown",
                src: "public/songs/playlists/valentines/Chris Brown - Under The Influence (Audio) - ChrisBrownVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:04",
                lyrics: "I found a love for me\nDarling, just dive right in\nAnd follow my lead\nWell, I found a girl, beautiful and sweet\nI never knew you were the someone waiting for me"
            },
            {
                title: "Lost in the Fire",
                artist: "Gesaffelstein & The Weeknd",
                src: "public/songs/playlists/valentines/Gesaffelstein & The Weeknd - Lost in the Fire (Official Video) - GesaffelsteinVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:22",
                lyrics: "I found a love for me\nDarling, just dive right in\nAnd follow my lead\nWell, I found a girl, beautiful and sweet\nI never knew you were the someone waiting for me"
            },
            {
                title: "Yellow",
                artist: "Lofi Fruits Music, Avocuddle, Fets",
                src: "public/songs/playlists/valentines/Yellow - Lofi Fruits Music, Avocuddle , Fets.mp3",
                albumCover: null,
                period: "chill",
                duration: "3:29",
                lyrics: "Look at the stars\nLook how they shine for you\nAnd everything you do\nYeah, they were all yellow\n\nI came along\nI wrote a song for you\nAnd all the things you do\nAnd it was called Yellow\n\nSo then I took my turn\nOh, what a thing to have done\nAnd it was all yellow\n\nYour skin, oh yeah, your skin and bones\nTurn into something beautiful\nYou know, you know I love you so\nYou know I love you so\n\nI swam across\nI jumped across for you\nOh, what a thing to do\n'Cause you were all yellow\n\nI drew a line\nI drew a line for you\nOh, what a thing to do\nAnd it was all yellow\n\nYour skin, oh yeah, your skin and bones\nTurn into something beautiful\nAnd you know, for you I'd bleed myself dry\nFor you I'd bleed myself dry\n\nIt's true\nLook how they shine for you\nLook how they shine for you\nLook how they shine for you\nLook how they shine for you\nLook how they shine\nLook at the stars\nLook how they shine for you\nAnd all the things that you do"
            },
            {
                title: "Adore You",
                artist: "Harry Styles",
                src: "public/songs/playlists/valentines/Adore You - Harry Styles.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:27",
                lyrics: "Walk in your rainbow paradise\nStrawberry lipstick state of mind\nI get so lost inside your eyes\nWould it be alright if I just\n\nAdore you\nAdore you\nAdore you\nAdore you\n\nYou don't have to say you love me\nYou don't have to say nothing\nYou don't have to say you're mine\nHoney, I'd walk through fire for you\nJust let me adore you\nLike it's the only thing I'll ever do\nLike it's the only thing I'll ever do"
            },
            {
                title: "As Long As You Love Me",
                artist: "Justin Bieber",
                src: "public/songs/playlists/valentines/As Long As You Love Me - Justin Bieber.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:40",
                lyrics: "As long as you love me\nWe could be starving\nWe could be homeless\nWe could be broke\nAs long as you love me\nI'll be your platinum\nI'll be your silver\nI'll be your gold\n\nAs long as you love, love me, love me\nAs long as you love, love me, love me\nI'll be your soldier\nFighting every second of the day for your dreams, girl\nI'll be your Hova\nYou could be my Destiny's Child on the scene, girl\n\nAs long as you love me\nI'll be your platinum\nI'll be your silver\nI'll be your gold\nAs long as you love, love me, love me\nAs long as you love, love me, love me"
            },
            {
                title: "I Want It That Way",
                artist: "Backstreet Boys",
                src: "public/songs/playlists/valentines/I Want It That Way - Backstreet Boys.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:33",
                lyrics: "You are my fire\nThe one desire\nBelieve when I say\nI want it that way\n\nBut we are two worlds apart\nCan't reach to your heart\nWhen you say\nThat I want it that way\n\nTell me why\nAin't nothin' but a heartache\nTell me why\nAin't nothin' but a mistake\nTell me why\nI never want to hear you say\nI want it that way\n\nAm I your fire\nYour one desire\nYes, I know it's too late\nBut I want it that way\n\nTell me why\nAin't nothin' but a heartache\nTell me why\nAin't nothin' but a mistake\nTell me why\nI never want to hear you say\nI want it that way"
            },
            {
                title: "Intentions",
                artist: "Justin Bieber",
                src: "public/songs/playlists/valentines/Intentions - Justin Bieber.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:32",
                lyrics: "Picture perfect, you don't need no filter\nGorgeous, make 'em drop dead, you a killer\nShower you with all my attention\nYeah, these are my only intentions\nStay in the kitchen, cookin' up, got your own bread\nHeart full of equity, you're an asset\nMake sure that you don't need no mentions\nYeah, these are my only intentions\n\nShout out to your mom and dad for makin' you\nStandin' ovation, they did a great job raisin' you\nWhen I create, you're my muse\nThat kind of smile that makes the news\nCan't nobody throw shade on your name in these streets\nTriple threat, you're a boss, you're a bae, you're a beast\nYou make it easy to choose\nYou got a mean touch, I can't refuse"
            },
            {
                title: "Love Story",
                artist: "Taylor Swift",
                src: "public/songs/playlists/valentines/Love Story - Taylor Swift.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:56",
                lyrics: "We were both young when I first saw you\nI close my eyes and the flashback starts\nI'm standin' there\nOn a balcony in summer air\n\nSee the lights, see the party, the ball gowns\nSee you make your way through the crowd\nAnd say hello\nLittle did I know\n\nThat you were Romeo, you were throwin' pebbles\nAnd my daddy said, \"Stay away from Juliet\"\nAnd I was cryin' on the staircase\nBeggin' you, \"Please don't go\"\nAnd I said\n\nRomeo, take me somewhere we can be alone\nI'll be waiting, all there's left to do is run\nYou'll be the prince and I'll be the princess\nIt's a love story, baby, just say yes\n\nSo I sneak out to the garden to see you\nWe keep quiet 'cause we're dead if they knew\nSo close your eyes\nEscape this town for a little while\n'Cause you were Romeo, I was a scarlet letter\nAnd my daddy said, \"Stay away from Juliet\"\nBut you were everything to me\nI was beggin' you, \"Please don't go\"\nAnd I said\n\nRomeo, take me somewhere we can be alone\nI'll be waiting, all there's left to do is run\nYou'll be the prince and I'll be the princess\nIt's a love story, baby, just say yes\n\nRomeo, save me, they're tryna tell me how to feel\nThis love is difficult, but it's real\nDon't be afraid, we'll make it out of this mess\nIt's a love story, baby, just say yes\n\nI got tired of waiting\nWonderin' if you were ever comin' around\nMy faith in you was fading\nWhen I met you on the outskirts of town\nAnd I said\n\nRomeo, save me, I've been feelin' so alone\nI keep waitin' for you, but you never come\nIs this in my head? I don't know what to think\nHe knelt to the ground and pulled out a ring\nAnd said\n\nMarry me, Juliet, you'll never have to be alone\nI love you and that's all I really know\nI talked to your dad, go pick out a white dress\nIt's a love story, baby, just say yes\n\nOh, oh, oh, oh\nOh, oh, oh, oh\n'Cause we were both young when I first saw you"
            },
            {
                title: "Lover",
                artist: "Taylor Swift",
                src: "public/songs/playlists/valentines/Lover - Taylor Swift.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:41",
                lyrics: "We could leave the Christmas lights up 'til January\nAnd this is our place, we make the rules\nAnd there's a dazzling haze, a mysterious way about you, dear\nHave I known you twenty seconds or twenty years?\n\nCan I go where you go?\nCan we always be this close forever and ever?\nAnd ah, take me out, and take me home\nYou're my, my, my, my\nLover\n\nWe could let our friends crash in the living room\nThis is our place, we make the call\nAnd I'm highly suspicious that everyone who sees you wants you\nI've loved you three summers now, honey, but I want 'em all\n\nCan I go where you go?\nCan we always be this close forever and ever?\nAnd ah, take me out, and take me home\nYou're my, my, my, my\nLover\n\nLadies and gentlemen, will you please stand?\nWith every guitar string scar on my hand\nI take this magnetic force of a man to be my lover\nMy heart's been borrowed and yours has been blue\nAll's well that ends well to end up with you\nSwear to be overdramatic and true to my lover\nAnd you'll save all your dirtiest jokes for me\nAnd at every table, I'll save you a seat, lover\n\nCan I go where you go?\nCan we always be this close forever and ever?\nAnd ah, take me out, and take me home\nYou're my, my, my, my\nLover\n\nCan I go where you go?\nCan we always be this close forever and ever?\nAnd ah, take me out, and take me home\nYou're my, my, my, my\nLover"
            },
            {
                title: "Ordinary",
                artist: "Alex Warren",
                src: "public/songs/playlists/valentines/Alex Warren - Ordinary (Official Video) - Alex Warren.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:20",
                lyrics: ""
            },
            {
                title: "high, high, high",
                artist: "Camylio",
                src: "public/songs/playlists/valentines/Camylio - high, high, high (Official Music Video) - CamylioVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:15",
                lyrics: ""
            },
            {
                title: "Azizam",
                artist: "Ed Sheeran",
                src: "public/songs/playlists/valentines/Ed Sheeran - Azizam (Pink Heart Video) - Ed Sheeran.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:45",
                lyrics: ""
            },
            {
                title: "Love Me Like You Do",
                artist: "Ellie Goulding",
                src: "public/songs/playlists/valentines/Ellie Goulding - Love Me Like You Do (Official Video) - EllieGouldingVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "4:12",
                lyrics: "You're the light, you're the night\nYou're the color of my blood\nYou're the cure, you're the pain\nYou're the only thing I wanna touch\nNever knew that it could mean so much, so much\n\nYou're the fear, I don't care\n'Cause I've never been so high\nFollow me through the dark\nLet me take you past our satellites\nYou can see the world you brought to life, to life\n\nSo love me like you do, lo-lo-love me like you do\nLove me like you do, lo-lo-love me like you do\nTouch me like you do, to-to-touch me like you do\nWhat are you waiting for?\n\nFading in, fading out\nOn the edge of paradise\nEvery inch of your skin is a holy grail I've got to find\nOnly you can set my heart on fire, on fire\nYeah, I'll let you set the pace\n'Cause I'm not thinking straight\nMy head's spinning around, I can't see clear no more\nWhat are you waiting for?\n\nLove me like you do, lo-lo-love me like you do\nLove me like you do, lo-lo-love me like you do\nTouch me like you do, to-to-touch me like you do\nWhat are you waiting for?\n\nLove me like you do, lo-lo-love me like you do\nLove me like you do, lo-lo-love me like you do\nTouch me like you do, to-to-touch me like you do\nWhat are you waiting for?\n\nI'll let you set the pace\n'Cause I'm not thinking straight\nMy head's spinning around, I can't see clear no more\nWhat are you waiting for?\n\nLove me like you do, lo-lo-love me like you do\nLove me like you do, lo-lo-love me like you do\nTouch me like you do, to-to-touch me like you do\nWhat are you waiting for?"
            },
            {
                title: "Still Falling For You",
                artist: "Ellie Goulding",
                src: "public/songs/playlists/valentines/Ellie Goulding - Still Falling For You (From Bridget Jones's Baby Original Soundtrack) - EllieGouldingVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:57",
                lyrics: ""
            },
            {
                title: "Capital Letters",
                artist: "Hailee Steinfeld, BloodPop®",
                src: "public/songs/playlists/valentines/Hailee Steinfeld, BloodPop® - Capital Letters - FiftyShadesVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:39",
                lyrics: ""
            },
            {
                title: "Unconditionally",
                artist: "Katy Perry",
                src: "public/songs/playlists/valentines/Katy Perry - Unconditionally (Official) - KatyPerryVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:48",
                lyrics: "Oh no, did I get too close?\nOh, did I almost see what's really on the inside?\nAll your insecurities\nAll the dirty laundry\nNever made me blink one time\n\nUnconditional, unconditionally\nI will love you unconditionally\nThere is no fear now\nLet go and just be free\nI will love you unconditionally\n\nSo open up your heart and just let it begin\nOpen up your heart and just let it begin\nOpen up your heart and just let it begin\nOpen up your heart\n\nAcceptance is the key to be\nTo be truly free\nWill you do the same for me?\n\nUnconditional, unconditionally\nI will love you unconditionally\nThere is no fear now\nLet go and just be free\nI will love you unconditionally\n\nSo open up your heart and just let it begin\nOpen up your heart and just let it begin\nOpen up your heart and just let it begin\nOpen up your heart"
            },
            {
                title: "Die With A Smile",
                artist: "Lady Gaga, Bruno Mars",
                src: "public/songs/playlists/valentines/Lady Gaga, Bruno Mars - Die With A Smile (Official Music Video) - LadyGagaVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:48",
                lyrics: ""
            },
            {
                title: "Belong Together",
                artist: "Mark Ambor",
                src: "public/songs/playlists/valentines/Mark Ambor - Belong Together (Official Visualizer) - Mark Ambor.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:15",
                lyrics: ""
            },
            {
                title: "I know love",
                artist: "Tate McRae ft. The Kid LAROI",
                src: "public/songs/playlists/valentines/Tate McRae - I know love (Official Video) ft. The Kid LAROI - TateMcRaeVEVO.mp3",
                albumCover: null,
                period: "romantic",
                duration: "3:24",
                lyrics: ""
            },
            {
                title: "blue",
                artist: "yung kai",
                src: "public/songs/playlists/valentines/yung kai - blue (official music video) - yung kai.mp3",
                albumCover: null,
                period: "chill",
                duration: "3:30",
                lyrics: ""
            }
        ];

        // Separate songs by tab based on folder paths
        const periodMixSongs = songs.filter(song => song.src.includes('period_mix'));
        const valentineSongs = songs.filter(song => song.src.includes('valentines') || song.src.includes('/valentines/'));
        const youAndMeSongs = songs.filter(song => 
            song.src.includes('you-and-me') || song.src.includes('/you-and-me/')
        );
        const allSongs = [...songs]; // Combined array for playback continuity

        let currentSongIndex = 0;
        let currentPeriod = 'all';
        let isPlaying = false;
        let audio = document.getElementById('audioPlayer');
        let filteredSongs = [...songs];
        let currentTab = 'you-and-me';
        let repeatMode = 0; // 0 = repeat all, 1 = no repeat, 2 = repeat one
        let isShuffleEnabled = false;
        let shuffledPlaylist = [];

        // Shuffle array function
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Function to update volume slider visual state
        function updateVolumeSliderVisual(slider, value) {
            if (slider) {
                slider.style.setProperty('--volume-percent', value + '%');
            }
        }

        // Function to update volume icon based on volume level
        function updateVolumeIcon(volume) {
            const volumeIcon = document.querySelector('.volume-icon i');
            const fullscreenVolumeIcon = document.querySelector('.fullscreen-volume-icon i');
            
            let iconClass = 'fas fa-volume-up';
            if (volume === 0) {
                iconClass = 'fas fa-volume-mute';
            } else if (volume < 33) {
                iconClass = 'fas fa-volume-down';
            } else if (volume < 66) {
                iconClass = 'fas fa-volume-down'; // Medium volume
            } else {
                iconClass = 'fas fa-volume-up';
            }
            
            // Update main player volume icon
            if (volumeIcon) {
                volumeIcon.className = iconClass;
                volumeIcon.style.display = 'inline-block';
            }
            
            // Update fullscreen player volume icon
            if (fullscreenVolumeIcon) {
                fullscreenVolumeIcon.className = iconClass;
                fullscreenVolumeIcon.style.display = 'inline-block';
            }
        }

        // Save state to localStorage
        function saveState() {
            try {
                localStorage.setItem('musicPlayer_tab', currentTab);
                localStorage.setItem('musicPlayer_songIndex', currentSongIndex.toString());
                localStorage.setItem('musicPlayer_currentTime', audio.currentTime.toString());
                localStorage.setItem('musicPlayer_volume', audio.volume.toString());
                localStorage.setItem('musicPlayer_repeatMode', repeatMode.toString());
                localStorage.setItem('musicPlayer_shuffleEnabled', isShuffleEnabled.toString());
                
                // Save fullscreen player state
                const fullscreenPlayer = document.getElementById('fullscreenPlayer');
                const isFullscreenOpen = fullscreenPlayer.classList.contains('active');
                localStorage.setItem('musicPlayer_fullscreenOpen', isFullscreenOpen.toString());
            } catch (e) {
                console.log('Could not save state:', e);
            }
        }

        // Load state from localStorage
        function loadState() {
            try {
                const savedTab = localStorage.getItem('musicPlayer_tab');
                const savedSongIndex = localStorage.getItem('musicPlayer_songIndex');
                const savedCurrentTime = localStorage.getItem('musicPlayer_currentTime');
                const savedVolume = localStorage.getItem('musicPlayer_volume');

                if (savedTab && (savedTab === 'period-mix' || savedTab === 'you-and-me' || savedTab === 'valentine')) {
                    currentTab = savedTab;
                }

                if (savedSongIndex) {
                    const index = parseInt(savedSongIndex);
                    if (index >= 0 && index < allSongs.length) {
                        currentSongIndex = index;
                    }
                }

                if (savedVolume) {
                    const volume = parseFloat(savedVolume);
                    if (volume >= 0 && volume <= 1) {
                        audio.volume = volume;
                        const volumeValue = (volume * 100).toString();
                        document.getElementById('volumeSlider').value = volumeValue;
                        const fullscreenVolumeSlider = document.getElementById('fullscreenVolumeSlider');
                        if (fullscreenVolumeSlider) {
                            fullscreenVolumeSlider.value = volumeValue;
                        }
                        // Update volume slider visuals
                        setTimeout(() => {
                            const volumeSlider = document.getElementById('volumeSlider');
                            const fullscreenVolumeSlider = document.getElementById('fullscreenVolumeSlider');
                            if (volumeSlider) {
                                volumeSlider.style.setProperty('--volume-percent', volumeValue + '%');
                            }
                            if (fullscreenVolumeSlider) {
                                fullscreenVolumeSlider.style.setProperty('--volume-percent', volumeValue + '%');
                            }
                            // Update volume icon
                            updateVolumeIcon(parseInt(volumeValue));
                        }, 50);
                    }
                }

                const savedFullscreenOpen = localStorage.getItem('musicPlayer_fullscreenOpen');
                const isFullscreenOpen = savedFullscreenOpen === 'true';
                
                const savedRepeatMode = localStorage.getItem('musicPlayer_repeatMode');
                if (savedRepeatMode !== null) {
                    const mode = parseInt(savedRepeatMode);
                    if (mode >= 0 && mode <= 2) {
                        repeatMode = mode;
                    }
                }
                
                const savedShuffleEnabled = localStorage.getItem('musicPlayer_shuffleEnabled');
                if (savedShuffleEnabled !== null) {
                    isShuffleEnabled = savedShuffleEnabled === 'true';
                }

                return {
                    tab: currentTab,
                    songIndex: currentSongIndex,
                    currentTime: savedCurrentTime ? parseFloat(savedCurrentTime) : 0,
                    volume: savedVolume ? parseFloat(savedVolume) : 0.7,
                    fullscreenOpen: isFullscreenOpen,
                    repeatMode: repeatMode,
                    shuffleEnabled: isShuffleEnabled
                };
            } catch (e) {
                console.log('Could not load state:', e);
                return {
                    tab: 'you-and-me',
                    songIndex: 0,
                    currentTime: 0,
                    volume: 0.7
                };
            }
        }

        // Cache key generator
        function getCacheKey(title, artist) {
            return `albumCover_${title}_${artist}`.replace(/[^a-zA-Z0-9_]/g, '_');
        }

        // Load cached album cover
        function getCachedAlbumCover(title, artist) {
            const cacheKey = getCacheKey(title, artist);
            const cached = localStorage.getItem(cacheKey);
            return cached || null;
        }

        // Save album cover to cache
        function cacheAlbumCover(title, artist, coverUrl) {
            if (coverUrl) {
                const cacheKey = getCacheKey(title, artist);
                try {
                    localStorage.setItem(cacheKey, coverUrl);
                } catch (e) {
                    console.log('Cache storage full, clearing old entries...');
                    // Clear old entries if storage is full
                    clearOldCacheEntries();
                    try {
                        localStorage.setItem(cacheKey, coverUrl);
                    } catch (e2) {
                        console.log('Could not cache album cover:', e2);
                    }
                }
            }
        }

        // Clear old cache entries if storage is full
        function clearOldCacheEntries() {
            const keys = Object.keys(localStorage);
            const albumCoverKeys = keys.filter(k => k.startsWith('albumCover_'));
            // Remove oldest 50% of entries
            const toRemove = Math.floor(albumCoverKeys.length / 2);
            for (let i = 0; i < toRemove; i++) {
                localStorage.removeItem(albumCoverKeys[i]);
            }
        }

        // Load cached covers for all songs
        function loadCachedCovers() {
            allSongs.forEach(song => {
                if (!song.albumCover) {
                    const cached = getCachedAlbumCover(song.title, song.artist);
                    if (cached) {
                        song.albumCover = cached;
                    }
                }
            });
        }

        async function fetchAlbumCover(title, artist) {
            // Check cache first
            const cached = getCachedAlbumCover(title, artist);
            if (cached) {
                return cached;
            }

            try {
                const searchTerm = encodeURIComponent(`${title} ${artist}`);
                const response = await fetch(`https://itunes.apple.com/search?term=${searchTerm}&media=music&limit=1`);
                const data = await response.json();
                
                if (data.results && data.results.length > 0) {
                    // Get the largest available artwork (600x600 or 1000x1000)
                    const artworkUrl = data.results[0].artworkUrl100 || data.results[0].artworkUrl60;
                    if (artworkUrl) {
                        // Replace 100x100 with 600x600 for better quality
                        const coverUrl = artworkUrl.replace('100x100', '600x600').replace('60x60', '600x600');
                        // Cache it
                        cacheAlbumCover(title, artist, coverUrl);
                        return coverUrl;
                    }
                }
            } catch (error) {
                console.log(`Could not fetch cover for ${title} by ${artist}:`, error);
            }
            return null;
        }

        // Lyrics caching functions
        function getLyricsCacheKey(title, artist) {
            return `lyrics_${title}_${artist}`.replace(/[^a-zA-Z0-9_]/g, '_');
        }

        function getCachedLyrics(title, artist) {
            const cacheKey = getLyricsCacheKey(title, artist);
            const cached = localStorage.getItem(cacheKey);
            if (cached) {
                try {
                    const data = JSON.parse(cached);
                    // Check if cache is still valid (30 days)
                    if (Date.now() - data.timestamp < 30 * 24 * 60 * 60 * 1000) {
                        return data.lyrics;
                    }
                } catch (e) {
                    // If parsing fails, return null
                }
            }
            return null;
        }

        function cacheLyrics(title, artist, lyrics) {
            if (lyrics) {
                const cacheKey = getLyricsCacheKey(title, artist);
                try {
                    const data = {
                        lyrics: lyrics,
                        timestamp: Date.now()
                    };
                    localStorage.setItem(cacheKey, JSON.stringify(data));
                } catch (e) {
                    console.log('Could not cache lyrics:', e);
                }
            }
        }

        async function fetchLyrics(title, artist) {
            // Check cache first
            const cached = getCachedLyrics(title, artist);
            if (cached) {
                return cached;
            }

            try {
                // Clean title and artist for API
                const cleanTitle = title.replace(/\([^)]*\)/g, '').trim(); // Remove parentheses content
                const cleanArtist = artist.replace(/ft\.|feat\.|featuring/gi, '').trim(); // Remove featuring
                
                const apiUrl = `https://api.lyrics.ovh/v1/${encodeURIComponent(cleanArtist)}/${encodeURIComponent(cleanTitle)}`;
                const response = await fetch(apiUrl);
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.lyrics) {
                        const lyrics = data.lyrics.trim();
                        cacheLyrics(title, artist, lyrics);
                        return lyrics;
                    }
                }
            } catch (error) {
                console.log(`Could not fetch lyrics for ${title} by ${artist}:`, error);
            }
            return null;
        }

        async function loadAlbumCovers() {
            for (let i = 0; i < allSongs.length; i++) {
                if (!allSongs[i].albumCover) {
                    const coverUrl = await fetchAlbumCover(allSongs[i].title, allSongs[i].artist);
                    if (coverUrl) {
                        allSongs[i].albumCover = coverUrl;
                        // Update the mini player display if this song is currently playing
                        if (i === currentSongIndex && isPlaying) {
                            updateAlbumArtDisplay(allSongs[i]);
                        }
                        // Re-render playlists to show new covers
                        renderPlaylist();
                        if (document.getElementById('you-and-me-section').style.display !== 'none') {
                            renderYouAndMePlaylist();
                        }
                        if (document.getElementById('valentine-section').style.display !== 'none') {
                            renderValentinePlaylist();
                        }
                        
                        // Always update collage when covers are loaded
                        const activeTab = document.querySelector('.main-tab.active');
                        if (activeTab) {
                            showTabCollage(activeTab.dataset.tab);
                        }
                    }
                    // Add a small delay to avoid rate limiting
                    await new Promise(resolve => setTimeout(resolve, 200));
                }
            }
        }

        function showTabCollage(tabType) {
            const albumArt = document.getElementById('albumArt');
            const albumImage = document.getElementById('albumImage');
            
            // Get songs for the current tab
            let tabSongs = [];
            if (tabType === 'you-and-me') {
                tabSongs = youAndMeSongs;
            } else if (tabType === 'period-mix') {
                tabSongs = periodMixSongs;
            } else if (tabType === 'valentine') {
                tabSongs = valentineSongs;
            }
            
            // Handle empty playlists
            if (tabSongs.length === 0) {
                const existingCollage = albumArt.querySelector('.album-collage');
                if (existingCollage) {
                    existingCollage.classList.add('fading');
                    setTimeout(() => {
                        if (existingCollage.parentNode) {
                            existingCollage.remove();
                        }
                        const icon = albumArt.querySelector('i');
                        if (icon) icon.style.display = 'flex';
                        albumArt.classList.remove('show-collage');
                    }, 300);
                } else {
                    const icon = albumArt.querySelector('i');
                    if (icon) icon.style.display = 'flex';
                    albumArt.classList.remove('show-collage');
                }
                return;
            }
            
            // Get top 4 songs with album covers
            const songsWithCovers = tabSongs.filter(s => s.albumCover).slice(0, 4);
            
            // Get existing collage
            const existingCollage = albumArt.querySelector('.album-collage');
            
            // Hide single image and icon
            albumImage.style.display = 'none';
            const icon = albumArt.querySelector('i');
            if (icon) icon.style.display = 'none';
            albumArt.classList.remove('has-image');
            albumArt.classList.add('show-collage');
            
            // Create new collage first (before removing old one)
            if (songsWithCovers.length > 0) {
                const collage = document.createElement('div');
                collage.className = 'album-collage';
                collage.style.opacity = '0'; // Start invisible
                collage.style.position = 'absolute';
                collage.style.top = '0';
                collage.style.left = '0';
                collage.style.width = '100%';
                collage.style.height = '100%';
                
                // Fill with 4 items (pad with empty if needed)
                for (let i = 0; i < 4; i++) {
                    const item = document.createElement('div');
                    item.className = 'album-collage-item';
                    
                    if (i < songsWithCovers.length && songsWithCovers[i].albumCover) {
                        const img = document.createElement('img');
                        img.src = songsWithCovers[i].albumCover;
                        img.alt = songsWithCovers[i].title;
                        img.className = 'collage-img';
                        img.onerror = function() {
                            const fallbackIcon = document.createElement('i');
                            fallbackIcon.className = 'fas fa-music';
                            item.innerHTML = '';
                            item.appendChild(fallbackIcon);
                        };
                        item.appendChild(img);
                    } else {
                        const fallbackIcon = document.createElement('i');
                        fallbackIcon.className = 'fas fa-music';
                        item.appendChild(fallbackIcon);
                    }
                    
                    collage.appendChild(item);
                }
                
                // Add new collage first
                albumArt.appendChild(collage);
                
                // Fade out old collage, then fade in new one
                if (existingCollage) {
                    existingCollage.classList.add('fading');
                    setTimeout(() => {
                        if (existingCollage.parentNode) {
                            existingCollage.remove();
                        }
                        // Fade in new collage after old one is removed
                        setTimeout(() => {
                            collage.style.position = '';
                            collage.style.opacity = '1';
                        }, 50);
                    }, 300);
                } else {
                    // No existing collage, just fade in
                    setTimeout(() => {
                        collage.style.position = '';
                        collage.style.opacity = '1';
                    }, 10);
                }
            } else {
                // No covers available - remove existing and show icon
                if (existingCollage) {
                    existingCollage.classList.add('fading');
                    setTimeout(() => {
                        if (existingCollage.parentNode) {
                            existingCollage.remove();
                        }
                        if (icon) icon.style.display = 'flex';
                    }, 300);
                } else {
                    if (icon) icon.style.display = 'flex';
                }
            }
        }

        function updateAlbumArtDisplay(song) {
            // Only update mini player, keep header unchanged
            const miniAlbumArt = document.getElementById('miniAlbumArt');
            const miniAlbumImage = document.getElementById('miniAlbumImage');
            
            // Update mini album art only
            if (song.albumCover) {
                miniAlbumImage.src = song.albumCover;
                miniAlbumImage.alt = song.title;
                miniAlbumImage.style.display = 'block';
                miniAlbumArt.classList.add('has-image');
                const miniIcon = miniAlbumArt.querySelector('i');
                if (miniIcon) miniIcon.style.display = 'none';
                miniAlbumImage.onerror = function() {
                    this.style.display = 'none';
                    miniAlbumArt.classList.remove('has-image');
                    const miniIcon = miniAlbumArt.querySelector('i');
                    if (miniIcon) miniIcon.style.display = 'flex';
                };
            } else {
                miniAlbumImage.style.display = 'none';
                miniAlbumArt.classList.remove('has-image');
                const miniIcon = miniAlbumArt.querySelector('i');
                if (miniIcon) miniIcon.style.display = 'flex';
            }
        }

        function init() {
            // Check if Valentine tab should be visible first
            toggleValentineTab();
            
            // Load cached covers first
            loadCachedCovers();
            
            // Load saved state
            const savedState = loadState();
            currentTab = savedState.tab;
            currentSongIndex = savedState.songIndex;
            audio.volume = savedState.volume;
            repeatMode = savedState.repeatMode !== undefined ? savedState.repeatMode : 0;
            isShuffleEnabled = savedState.shuffleEnabled !== undefined ? savedState.shuffleEnabled : false;
            if (isShuffleEnabled) {
                shuffledPlaylist = shuffleArray([...Array(allSongs.length).keys()]);
            }
            const volumeValue = (savedState.volume * 100).toString();
            document.getElementById('volumeSlider').value = volumeValue;
            const fullscreenVolumeSlider = document.getElementById('fullscreenVolumeSlider');
            if (fullscreenVolumeSlider) {
                fullscreenVolumeSlider.value = volumeValue;
            }
            // Update volume slider visuals
            setTimeout(() => {
                const volumeSlider = document.getElementById('volumeSlider');
                const fullscreenVolumeSlider = document.getElementById('fullscreenVolumeSlider');
                if (volumeSlider) {
                    volumeSlider.style.setProperty('--volume-percent', volumeValue + '%');
                }
                if (fullscreenVolumeSlider) {
                    fullscreenVolumeSlider.style.setProperty('--volume-percent', volumeValue + '%');
                }
                // Update volume icon
                updateVolumeIcon(parseInt(volumeValue));
            }, 100);

            // Restore tab (but only if it's visible)
            const tabElement = document.querySelector(`.main-tab[data-tab="${currentTab}"]`);
            if (tabElement && tabElement.style.display !== 'none') {
                document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
                tabElement.classList.add('active');
                
                if (currentTab === 'period-mix') {
                    document.getElementById('period-mix-section').style.display = 'block';
                    document.getElementById('you-and-me-section').style.display = 'none';
                    document.getElementById('valentine-section').style.display = 'none';
                    renderPlaylist();
                } else if (currentTab === 'valentine') {
                    document.getElementById('period-mix-section').style.display = 'none';
                    document.getElementById('you-and-me-section').style.display = 'none';
                    document.getElementById('valentine-section').style.display = 'block';
                    renderValentinePlaylist();
                } else {
                    document.getElementById('period-mix-section').style.display = 'none';
                    document.getElementById('you-and-me-section').style.display = 'block';
                    document.getElementById('valentine-section').style.display = 'none';
                    renderYouAndMePlaylist();
                }
            } else {
                // If saved tab is hidden or doesn't exist, default to You and Me
                if (currentTab === 'valentine' && !isValentineDay()) {
                    currentTab = 'you-and-me';
                    const youAndMeTab = document.querySelector('.main-tab[data-tab="you-and-me"]');
                    if (youAndMeTab) {
                        document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
                        youAndMeTab.classList.add('active');
                    }
                }
                renderYouAndMePlaylist();
            }

            // Always show tab name and collage in header
            let tabName = 'You and Me';
            if (currentTab === 'period-mix') {
                tabName = 'Period Mix';
            } else if (currentTab === 'valentine') {
                tabName = '💕 Valentine';
            }
            document.getElementById('currentTitle').textContent = tabName;
            document.getElementById('currentArtist').textContent = '';
            showTabCollage(currentTab);

            // Restore song if there was one playing (only update mini player)
            if (currentSongIndex >= 0 && currentSongIndex < allSongs.length) {
                const song = allSongs[currentSongIndex];
                document.getElementById('miniTitle').textContent = song.title;
                document.getElementById('miniArtist').textContent = song.artist;
                
                audio.src = song.src;
                audio.currentTime = savedState.currentTime || 0;
                
                // Update mini player album art only
                updateAlbumArtDisplay(song);
            } else {
                // Show tab name in mini player too
                document.getElementById('miniTitle').textContent = tabName;
                document.getElementById('miniArtist').textContent = '';
            }

            // Restore fullscreen player state (only if a song is playing)
            if (savedState.fullscreenOpen && currentSongIndex >= 0 && currentSongIndex < allSongs.length) {
                // Use setTimeout to ensure DOM is ready and song is loaded
                setTimeout(() => {
                    openFullscreenPlayer();
                }, 200);
            }

            setupEventListeners();
            
            // Load missing album covers in the background
            loadAlbumCovers().then(() => {
                // Always update collage after covers are loaded
                showTabCollage(currentTab);
            });

            // Save state periodically
            setInterval(saveState, 2000); // Save every 2 seconds
            
            // Save state when page is about to unload
            window.addEventListener('beforeunload', saveState);
        }

        function renderPlaylist() {
            const playlist = document.getElementById('playlist');
            const wasAnimated = playlist.classList.contains('no-animate');
            playlist.innerHTML = '';
            if (!wasAnimated) {
                playlist.classList.remove('no-animate');
            }

            // Show Period Mix songs, sorted by title
            filteredSongs = [...periodMixSongs].sort((a, b) => a.title.localeCompare(b.title));

            // Show empty state if no songs
            if (filteredSongs.length === 0) {
                const emptyMessage = document.createElement('div');
                emptyMessage.style.cssText = 'padding: 40px; text-align: center; color: rgba(255, 255, 255, 0.5); font-size: 14px;';
                emptyMessage.textContent = 'No songs in Period Mix yet';
                playlist.appendChild(emptyMessage);
                return;
            }

            filteredSongs.forEach((song, index) => {
                const item = document.createElement('div');
                item.className = 'playlist-item';
                const allSongsIndex = allSongs.indexOf(song);
                const isCurrentlyPlaying = allSongsIndex === currentSongIndex && isPlaying;
                if (isCurrentlyPlaying) {
                    item.classList.add('playing');
                }
                const artDiv = item.querySelector ? null : document.createElement('div');
                item.innerHTML = `
                    <div class="playlist-item-number">
                        ${isCurrentlyPlaying ? `
                            <div class="playing-indicator">
                                <div class="equalizer-bars">
                                    <div class="equalizer-bar"></div>
                                    <div class="equalizer-bar"></div>
                                    <div class="equalizer-bar"></div>
                                    <div class="equalizer-bar"></div>
                                </div>
                            </div>
                        ` : ''}
                        <span>${index + 1}</span>
                    </div>
                    <div class="playlist-item-art">
                        <i class="fas fa-music"></i>
                        ${song.albumCover ? `<img src="${song.albumCover}" alt="${song.title}" onerror="this.style.display='none'; this.parentElement.querySelector('i').style.display='flex';" onload="this.style.display='block'; this.parentElement.querySelector('i').style.display='none'; this.parentElement.classList.add('has-image');">` : ''}
                    </div>
                    <div class="playlist-item-info">
                        <div class="playlist-item-title">${song.title}</div>
                        <div class="playlist-item-artist">${song.artist}</div>
                    </div>
                    <div class="playlist-item-duration">${song.duration}</div>
                `;
                item.addEventListener('click', () => {
                    const actualIndex = allSongs.indexOf(song);
                    playSong(actualIndex);
                });
                playlist.appendChild(item);
            });
            
            // Mark as animated after first render, prevent animations on subsequent renders
            if (!wasAnimated) {
                setTimeout(() => {
                    playlist.classList.add('no-animate');
                }, 600);
            }
        }

        function renderYouAndMePlaylist() {
            const playlist = document.getElementById('you-and-me-playlist');
            const wasAnimated = playlist.classList.contains('no-animate');
            playlist.innerHTML = '';
            if (!wasAnimated) {
                playlist.classList.remove('no-animate');
            }

            // Show "You and Me" songs, sorted by title
            const sortedSongs = [...youAndMeSongs].sort((a, b) => a.title.localeCompare(b.title));
            sortedSongs.forEach((song, index) => {
                const item = document.createElement('div');
                item.className = 'playlist-item';
                const allSongsIndex = allSongs.indexOf(song);
                const isCurrentlyPlaying = allSongsIndex === currentSongIndex && isPlaying;
                if (isCurrentlyPlaying) {
                    item.classList.add('playing');
                }
                item.innerHTML = `
                    <div class="playlist-item-number">
                        ${isCurrentlyPlaying ? `
                            <div class="playing-indicator">
                                <div class="equalizer-bars">
                                    <div class="equalizer-bar"></div>
                                    <div class="equalizer-bar"></div>
                                    <div class="equalizer-bar"></div>
                                    <div class="equalizer-bar"></div>
                                </div>
                            </div>
                        ` : ''}
                        <span>${index + 1}</span>
                    </div>
                    <div class="playlist-item-art">
                        <i class="fas fa-music"></i>
                        ${song.albumCover ? `<img src="${song.albumCover}" alt="${song.title}" onerror="this.style.display='none'; this.parentElement.querySelector('i').style.display='flex';" onload="this.style.display='block'; this.parentElement.querySelector('i').style.display='none'; this.parentElement.classList.add('has-image');">` : ''}
                    </div>
                    <div class="playlist-item-info">
                        <div class="playlist-item-title">${song.title}</div>
                        <div class="playlist-item-artist">${song.artist}</div>
                    </div>
                    <div class="playlist-item-duration">${song.duration}</div>
                `;
                item.addEventListener('click', () => {
                    const actualIndex = allSongs.indexOf(song);
                    playSong(actualIndex);
                });
                playlist.appendChild(item);
            });
            
            // Mark as animated after first render, prevent animations on subsequent renders
            if (!wasAnimated) {
                setTimeout(() => {
                    playlist.classList.add('no-animate');
                }, 600);
            }
        }

        function renderValentinePlaylist() {
            const playlist = document.getElementById('valentine-playlist');
            const wasAnimated = playlist.classList.contains('no-animate');
            playlist.innerHTML = '';
            if (!wasAnimated) {
                playlist.classList.remove('no-animate');
            }

            // Show empty state if no songs
            if (valentineSongs.length === 0) {
                const emptyMessage = document.createElement('div');
                emptyMessage.style.cssText = 'padding: 40px; text-align: center; color: rgba(255, 255, 255, 0.5); font-size: 14px;';
                emptyMessage.textContent = 'No songs in Valentine yet. Add songs to the valentine folder.';
                playlist.appendChild(emptyMessage);
                return;
            }

            // Show Valentine songs, sorted by title
            const sortedSongs = [...valentineSongs].sort((a, b) => a.title.localeCompare(b.title));
            sortedSongs.forEach((song, index) => {
                const item = document.createElement('div');
                item.className = 'playlist-item';
                const allSongsIndex = allSongs.indexOf(song);
                const isCurrentlyPlaying = allSongsIndex === currentSongIndex && isPlaying;
                if (isCurrentlyPlaying) {
                    item.classList.add('playing');
                }
                item.innerHTML = `
                    <div class="playlist-item-number">
                        ${isCurrentlyPlaying ? `
                            <div class="playing-indicator">
                                <div class="equalizer-bars">
                                    <div class="equalizer-bar"></div>
                                    <div class="equalizer-bar"></div>
                                    <div class="equalizer-bar"></div>
                                    <div class="equalizer-bar"></div>
                                </div>
                            </div>
                        ` : ''}
                        <span>${index + 1}</span>
                    </div>
                    <div class="playlist-item-art">
                        <i class="fas fa-music"></i>
                        ${song.albumCover ? `<img src="${song.albumCover}" alt="${song.title}" onerror="this.style.display='none'; this.parentElement.querySelector('i').style.display='flex';" onload="this.style.display='block'; this.parentElement.querySelector('i').style.display='none'; this.parentElement.classList.add('has-image');">` : ''}
                    </div>
                    <div class="playlist-item-info">
                        <div class="playlist-item-title">${song.title}</div>
                        <div class="playlist-item-artist">${song.artist}</div>
                    </div>
                    <div class="playlist-item-duration">${song.duration}</div>
                `;
                item.addEventListener('click', () => {
                    const actualIndex = allSongs.indexOf(song);
                    playSong(actualIndex);
                });
                playlist.appendChild(item);
            });
            
            // Mark as animated after first render, prevent animations on subsequent renders
            if (!wasAnimated) {
                setTimeout(() => {
                    playlist.classList.add('no-animate');
                }, 600);
            }
        }

        function openFullscreenPlayer() {
            const fullscreenPlayer = document.getElementById('fullscreenPlayer');
            fullscreenPlayer.classList.add('active');
            updateFullscreenPlayer(); // This is now async
            document.body.style.overflow = 'hidden';
            saveState(); // Save fullscreen state
        }

        function closeFullscreenPlayer() {
            const fullscreenPlayer = document.getElementById('fullscreenPlayer');
            const fullscreenLyricsLink = document.getElementById('fullscreenLyricsLink');
            fullscreenPlayer.classList.remove('active');
            fullscreenPlayer.classList.remove('lyrics-mode');
            if (fullscreenLyricsLink) {
                fullscreenLyricsLink.classList.remove('active');
            }
            document.body.style.overflow = '';
            saveState(); // Save fullscreen state
        }

        async function updateFullscreenPlayer() {
            if (currentSongIndex >= 0 && currentSongIndex < allSongs.length) {
                const song = allSongs[currentSongIndex];
                document.getElementById('fullscreenTitle').textContent = song.title;
                document.getElementById('fullscreenArtist').textContent = song.artist;
                
                // Update album art
                const fullscreenAlbumArt = document.getElementById('fullscreenAlbumArt');
                const fullscreenAlbumImage = document.getElementById('fullscreenAlbumImage');
                if (song.albumCover) {
                    fullscreenAlbumImage.src = song.albumCover;
                    fullscreenAlbumImage.style.display = 'block';
                    fullscreenAlbumArt.classList.add('has-image');
                    const icon = fullscreenAlbumArt.querySelector('i');
                    if (icon) icon.style.display = 'none';
                } else {
                    fullscreenAlbumImage.style.display = 'none';
                    fullscreenAlbumArt.classList.remove('has-image');
                    const icon = fullscreenAlbumArt.querySelector('i');
                    if (icon) icon.style.display = 'flex';
                }
                
                // Update background image (Netflix-style: clear image with overlay)
                const fullscreenPlayer = document.getElementById('fullscreenPlayer');
                if (song.albumCover) {
                    // Preload image for smooth transition
                    const img = new Image();
                    img.onload = () => {
                        fullscreenPlayer.style.setProperty('--bg-image', `url(${song.albumCover})`);
                    };
                    img.src = song.albumCover;
                } else {
                    fullscreenPlayer.style.setProperty('--bg-image', 'linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #000000 100%)');
                }
                
                // Update lyrics
                const lyricsContent = document.getElementById('lyricsContent');
                
                // Show loading state
                lyricsContent.innerHTML = '<div class="lyrics-line" style="opacity: 0.5; text-align: center; font-style: italic;">Loading lyrics...</div>';
                
                // Check if lyrics are already in song object
                if (song.lyrics) {
                    lyricsContent.innerHTML = song.lyrics.split('\n').map(line => 
                        `<div class="lyrics-line">${line || '<br>'}</div>`
                    ).join('');
                } else {
                    // Try to fetch lyrics from API
                    const lyrics = await fetchLyrics(song.title, song.artist);
                    if (lyrics) {
                        song.lyrics = lyrics; // Cache in song object
                        lyricsContent.innerHTML = lyrics.split('\n').map(line => 
                            `<div class="lyrics-line">${line || '<br>'}</div>`
                        ).join('');
                    } else {
                        lyricsContent.innerHTML = '<div class="lyrics-line" style="opacity: 0.5; text-align: center; font-style: italic;">Lyrics not available</div>';
                    }
                }
                
                // Update lyrics view controls
                updateLyricsViewControls();
            }
        }

        function toggleLyricsView() {
            const fullscreenPlayer = document.getElementById('fullscreenPlayer');
            const fullscreenLyricsLink = document.getElementById('fullscreenLyricsLink');
            if (!fullscreenPlayer.classList.contains('active')) {
                // Open fullscreen player first if not open
                openFullscreenPlayer();
                setTimeout(() => {
                    fullscreenPlayer.classList.add('lyrics-mode');
                    if (fullscreenLyricsLink) {
                        fullscreenLyricsLink.classList.add('active');
                    }
                    updateLyricsViewControls();
                }, 100);
            } else {
                fullscreenPlayer.classList.add('lyrics-mode');
                if (fullscreenLyricsLink) {
                    fullscreenLyricsLink.classList.add('active');
                }
                updateLyricsViewControls();
            }
        }

        function exitLyricsView() {
            const fullscreenPlayer = document.getElementById('fullscreenPlayer');
            const fullscreenLyricsLink = document.getElementById('fullscreenLyricsLink');
            fullscreenPlayer.classList.remove('lyrics-mode');
            if (fullscreenLyricsLink) {
                fullscreenLyricsLink.classList.remove('active');
            }
        }

        function updateLyricsViewControls() {
            if (currentSongIndex >= 0 && currentSongIndex < allSongs.length) {
                const song = allSongs[currentSongIndex];
                document.getElementById('lyricsViewTitle').textContent = song.title;
                document.getElementById('lyricsViewArtist').textContent = song.artist;
                
                // Update album art
                const lyricsViewAlbumArt = document.getElementById('lyricsViewAlbumArt');
                const lyricsViewAlbumImage = document.getElementById('lyricsViewAlbumImage');
                const icon = lyricsViewAlbumArt.querySelector('i');
                if (song.albumCover) {
                    lyricsViewAlbumImage.src = song.albumCover;
                    lyricsViewAlbumImage.style.display = 'block';
                    lyricsViewAlbumArt.style.position = 'relative';
                    if (icon) icon.style.display = 'none';
                } else {
                    lyricsViewAlbumImage.style.display = 'none';
                    lyricsViewAlbumArt.style.position = 'relative';
                    if (icon) icon.style.display = 'flex';
                }
            }
        }

        function setupLyricsViewProgressBar() {
            const progressContainer = document.getElementById('lyricsViewProgressContainer');
            const progressBar = document.getElementById('lyricsViewProgressBar');
            let isDragging = false;

            progressContainer.addEventListener('mousedown', (e) => {
                if (!audio.duration) return;
                isDragging = true;
                progressContainer.classList.add('dragging');
                updateProgressFromEvent(e, progressContainer, progressBar);
            });

            progressContainer.addEventListener('mousemove', (e) => {
                if (isDragging && audio.duration) {
                    updateProgressFromEvent(e, progressContainer, progressBar);
                }
            });

            document.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                    progressContainer.classList.remove('dragging');
                }
            });

            // Touch support
            progressContainer.addEventListener('touchstart', (e) => {
                if (!audio.duration) return;
                isDragging = true;
                progressContainer.classList.add('dragging');
                updateProgressFromTouch(e, progressContainer, progressBar);
            }, { passive: true });

            progressContainer.addEventListener('touchmove', (e) => {
                if (isDragging && audio.duration) {
                    updateProgressFromTouch(e, progressContainer, progressBar);
                }
            }, { passive: true });

            progressContainer.addEventListener('touchend', () => {
                if (isDragging) {
                    isDragging = false;
                    progressContainer.classList.remove('dragging');
                }
            }, { passive: true });
        }

        function updateProgressFromEvent(e, container, progressBar) {
            const rect = container.getBoundingClientRect();
            const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
            const newTime = percent * audio.duration;
            audio.currentTime = newTime;
            progressBar.style.width = (percent * 100) + '%';
        }

        function updateProgressFromTouch(e, container, progressBar) {
            const touch = e.touches[0];
            const rect = container.getBoundingClientRect();
            const percent = Math.max(0, Math.min(1, (touch.clientX - rect.left) / rect.width));
            const newTime = percent * audio.duration;
            audio.currentTime = newTime;
            progressBar.style.width = (percent * 100) + '%';
        }

        function setupEventListeners() {
            // Open fullscreen player on bottom player click
            document.querySelector('.now-playing-info').addEventListener('click', () => {
                if (audio.src) {
                    openFullscreenPlayer();
                }
            });

            // Close fullscreen player
            document.getElementById('closeFullscreen').addEventListener('click', closeFullscreenPlayer);
            
            // Lyrics view toggle
            const fullscreenLyricsLink = document.getElementById('fullscreenLyricsLink');
            if (fullscreenLyricsLink) {
                fullscreenLyricsLink.addEventListener('click', toggleLyricsView);
            }
            document.getElementById('fullscreenBackBtn').addEventListener('click', exitLyricsView);
            
            // Close on escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    const fullscreenPlayer = document.getElementById('fullscreenPlayer');
                    if (fullscreenPlayer.classList.contains('lyrics-mode')) {
                        exitLyricsView();
                    } else {
                        closeFullscreenPlayer();
                    }
                }
            });

            // Fullscreen player controls
            document.getElementById('fullscreenPlayBtn').addEventListener('click', togglePlay);
            document.getElementById('fullscreenNextBtn').addEventListener('click', () => playNext());
            document.getElementById('fullscreenPrevBtn').addEventListener('click', () => playPrevious());
            
            // Lyrics view controls
            document.getElementById('lyricsViewPlayBtn').addEventListener('click', togglePlay);
            document.getElementById('lyricsViewNextBtn').addEventListener('click', () => playNext());
            document.getElementById('lyricsViewPrevBtn').addEventListener('click', () => playPrevious());
            const lyricsViewShuffleBtn = document.getElementById('lyricsViewShuffleBtn');
            if (lyricsViewShuffleBtn) {
                lyricsViewShuffleBtn.addEventListener('click', toggleShuffle);
            }
            const lyricsViewRepeatBtn = document.getElementById('lyricsViewRepeatBtn');
            if (lyricsViewRepeatBtn) {
                lyricsViewRepeatBtn.addEventListener('click', toggleRepeat);
            }
            
            // Lyrics view progress bar
            setupLyricsViewProgressBar();
            
            // Shuffle buttons
            document.getElementById('shuffleBtn').addEventListener('click', toggleShuffle);
            document.getElementById('fullscreenShuffleBtn').addEventListener('click', toggleShuffle);
            
            // Initialize shuffle button state
            updateShuffleButton();
            
            // Initialize volume slider visuals
            const initialVolume = document.getElementById('volumeSlider').value;
            updateVolumeSliderVisual(document.getElementById('volumeSlider'), initialVolume);
            updateVolumeSliderVisual(document.getElementById('fullscreenVolumeSlider'), initialVolume);
            updateVolumeIcon(parseInt(initialVolume));
            
            // Fullscreen volume slider
            document.getElementById('fullscreenVolumeSlider').addEventListener('input', (e) => {
                const value = e.target.value;
                audio.volume = value / 100;
                document.getElementById('volumeSlider').value = value;
                updateVolumeSliderVisual(e.target, value);
                updateVolumeSliderVisual(document.getElementById('volumeSlider'), value);
                updateVolumeIcon(parseInt(value));
                saveState(); // Save volume change
            });
            
            // Sync fullscreen volume slider with main volume slider
            document.getElementById('volumeSlider').addEventListener('input', (e) => {
                const value = e.target.value;
                document.getElementById('fullscreenVolumeSlider').value = value;
                updateVolumeSliderVisual(e.target, value);
                updateVolumeSliderVisual(document.getElementById('fullscreenVolumeSlider'), value);
                updateVolumeIcon(parseInt(value));
            });
            
            // Function to handle progress bar seeking (click and drag)
            function setupProgressBarDrag(containerId) {
                const container = document.getElementById(containerId);
                let isDragging = false;
                let wasPlayingBeforeDrag = false;

                function seekToPosition(e) {
                    const rect = container.getBoundingClientRect();
                    const clientX = e.clientX || (e.touches && e.touches[0] ? e.touches[0].clientX : 0);
                    const percent = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));
                    
                    if (audio.duration) {
                        audio.currentTime = percent * audio.duration;
                        // Manually update progress bar visual
                        const progressBar = document.getElementById('progressBar');
                        const fullscreenProgressBar = document.getElementById('fullscreenProgressBar');
                        if (progressBar) {
                            progressBar.style.width = (percent * 100) + '%';
                        }
                        if (fullscreenProgressBar) {
                            fullscreenProgressBar.style.width = (percent * 100) + '%';
                        }
                        // Update time display
                        const minutes = Math.floor(audio.currentTime / 60);
                        const seconds = Math.floor(audio.currentTime % 60);
                        const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                        const currentTimeElement = document.getElementById('currentTime');
                        const fullscreenCurrentTime = document.getElementById('fullscreenCurrentTime');
                        if (currentTimeElement) {
                            currentTimeElement.textContent = timeString;
                        }
                        if (fullscreenCurrentTime) {
                            fullscreenCurrentTime.textContent = timeString;
                        }
                    }
                }

                // Mouse events
                container.addEventListener('mousedown', (e) => {
                    isDragging = true;
                    container.classList.add('dragging');
                    wasPlayingBeforeDrag = !audio.paused;
                    if (wasPlayingBeforeDrag) {
                        audio.pause();
                    }
                    seekToPosition(e);
                    e.preventDefault();
                });

                document.addEventListener('mousemove', (e) => {
                    if (isDragging) {
                        seekToPosition(e);
                    }
                });

                document.addEventListener('mouseup', () => {
                    if (isDragging) {
                        container.classList.remove('dragging');
                        if (wasPlayingBeforeDrag) {
                            audio.play();
                        }
                    }
                    isDragging = false;
                });

                // Touch events for mobile
                container.addEventListener('touchstart', (e) => {
                    isDragging = true;
                    container.classList.add('dragging');
                    wasPlayingBeforeDrag = !audio.paused;
                    if (wasPlayingBeforeDrag) {
                        audio.pause();
                    }
                    seekToPosition(e);
                    e.preventDefault();
                });

                document.addEventListener('touchmove', (e) => {
                    if (isDragging) {
                        seekToPosition(e);
                        e.preventDefault();
                    }
                });

                document.addEventListener('touchend', () => {
                    if (isDragging) {
                        container.classList.remove('dragging');
                        if (wasPlayingBeforeDrag) {
                            audio.play();
                        }
                    }
                    isDragging = false;
                });

                // Click fallback (for when not dragging)
                container.addEventListener('click', (e) => {
                    if (!isDragging) {
                        seekToPosition(e);
                    }
                });
            }

            // Setup drag for both progress bars
            setupProgressBarDrag('progressContainer');
            setupProgressBarDrag('fullscreenProgressContainer');

            // Main tabs (Period Mix / You and Me / Valentine)
            document.querySelectorAll('.main-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    // Don't allow clicking on hidden Valentine tab
                    if (tab.dataset.tab === 'valentine' && !isValentineDay()) {
                        return;
                    }
                    
                    document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    const tabType = tab.dataset.tab;
                    const tabName = tab.textContent.trim();
                    
                    currentTab = tabType;
                    saveState(); // Save tab change
                    
                    if (tabType === 'period-mix') {
                        document.getElementById('period-mix-section').style.display = 'block';
                        document.getElementById('you-and-me-section').style.display = 'none';
                        document.getElementById('valentine-section').style.display = 'none';
                        renderPlaylist();
                    } else if (tabType === 'you-and-me') {
                        document.getElementById('period-mix-section').style.display = 'none';
                        document.getElementById('you-and-me-section').style.display = 'block';
                        document.getElementById('valentine-section').style.display = 'none';
                        renderYouAndMePlaylist();
                    } else if (tabType === 'valentine') {
                        document.getElementById('period-mix-section').style.display = 'none';
                        document.getElementById('you-and-me-section').style.display = 'none';
                        document.getElementById('valentine-section').style.display = 'block';
                        renderValentinePlaylist();
                    }
                    
                    // Always update header title and collage when switching tabs
                    document.getElementById('currentTitle').textContent = tabName;
                    document.getElementById('currentArtist').textContent = '';
                    // Only update mini player title if no song is playing
                    if (!isPlaying && !audio.src) {
                        document.getElementById('miniTitle').textContent = tabName;
                        document.getElementById('miniArtist').textContent = '';
                    }
                    // Always update collage/header image when switching tabs
                    showTabCollage(tabType);
                });
            });


            document.getElementById('playBtn').addEventListener('click', togglePlay);
            document.getElementById('nextBtn').addEventListener('click', () => playNext());
            document.getElementById('prevBtn').addEventListener('click', () => playPrevious());

            // Header action buttons
            const shuffleHeaderBtn = document.getElementById('shuffleHeaderBtn');
            const playHeaderBtn = document.getElementById('playHeaderBtn');

            if (shuffleHeaderBtn) {
                shuffleHeaderBtn.addEventListener('click', toggleShuffle);
            }

            if (playHeaderBtn) {
                playHeaderBtn.addEventListener('click', () => {
                    if (audio.paused && !audio.src) {
                        // Get songs for current tab
                        let tabSongs = [];
                        if (currentTab === 'you-and-me') {
                            tabSongs = youAndMeSongs;
                        } else if (currentTab === 'period-mix') {
                            tabSongs = periodMixSongs;
                        } else if (currentTab === 'valentine') {
                            tabSongs = valentineSongs;
                        }
                        
                        if (tabSongs.length > 0) {
                            const firstSong = tabSongs[0];
                            const index = allSongs.indexOf(firstSong);
                            if (index >= 0) {
                                playSong(index);
                            }
                        }
                    } else {
                        togglePlay();
                    }
                });
            }

            // Mobile-specific touch enhancements
            if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
                // Add touch feedback to interactive elements
                const touchElements = document.querySelectorAll('.control-btn, .playlist-item, .playlist-card, .main-tab, .now-playing-info, .album-art-large');
                
                touchElements.forEach(element => {
                    element.addEventListener('touchstart', function(e) {
                        this.style.transition = 'transform 0.1s ease-out';
                        this.style.transform = 'scale(0.95)';
                    }, { passive: true });
                    
                    element.addEventListener('touchend', function(e) {
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 100);
                    }, { passive: true });
                    
                    element.addEventListener('touchcancel', function(e) {
                        this.style.transform = '';
                    }, { passive: true });
                });

                // Swipe gesture for album art to skip tracks
                let touchStartX = 0;
                let touchStartY = 0;
                const albumArt = document.querySelector('.album-art-large');
                
                if (albumArt) {
                    albumArt.addEventListener('touchstart', (e) => {
                        touchStartX = e.touches[0].clientX;
                        touchStartY = e.touches[0].clientY;
                    }, { passive: true });
                    
                    albumArt.addEventListener('touchend', (e) => {
                        if (!touchStartX || !touchStartY) return;
                        
                        const touchEndX = e.changedTouches[0].clientX;
                        const touchEndY = e.changedTouches[0].clientY;
                        const diffX = touchStartX - touchEndX;
                        const diffY = touchStartY - touchEndY;
                        
                        // Only trigger if horizontal swipe is greater than vertical
                        if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
                            if (diffX > 0) {
                                // Swipe left - next song
                                playNext();
                                // Add visual feedback
                                albumArt.style.animation = 'mobileSlideLeft 0.3s ease-out';
                                setTimeout(() => {
                                    albumArt.style.animation = '';
                                }, 300);
                            } else {
                                // Swipe right - previous song
                                playPrevious();
                                // Add visual feedback
                                albumArt.style.animation = 'mobileSlideRight 0.3s ease-out';
                                setTimeout(() => {
                                    albumArt.style.animation = '';
                                }, 300);
                            }
                        }
                        
                        touchStartX = 0;
                        touchStartY = 0;
                    }, { passive: true });
                }

                // Prevent double-tap zoom on buttons
                let lastTap = 0;
                touchElements.forEach(element => {
                    element.addEventListener('touchend', function(e) {
                        const currentTime = new Date().getTime();
                        const tapLength = currentTime - lastTap;
                        if (tapLength < 300 && tapLength > 0) {
                            e.preventDefault();
                        }
                        lastTap = currentTime;
                    });
                });
            }

            // Repeat button - cycle through modes
            function toggleRepeat() {
                repeatMode = (repeatMode + 1) % 3; // Cycle: 0 -> 1 -> 2 -> 0
                updateRepeatButton();
                saveState();
            }

            function updateRepeatButton() {
                const repeatBtn = document.getElementById('repeatBtn');
                const fullscreenRepeatBtn = document.getElementById('fullscreenRepeatBtn');
                const lyricsViewRepeatBtn = document.getElementById('lyricsViewRepeatBtn');
                
                let iconClass = '';
                let title = '';
                let showBadge = false;
                
                if (repeatMode === 0) {
                    // Repeat all
                    iconClass = 'fas fa-redo';
                    title = 'Repeat All';
                } else if (repeatMode === 1) {
                    // No repeat
                    iconClass = 'fas fa-redo';
                    title = 'No Repeat';
                } else {
                    // Repeat one
                    iconClass = 'fas fa-redo';
                    title = 'Repeat One';
                    showBadge = true;
                }
                
                const updateButton = (btn) => {
                    if (!btn) return;
                    if (showBadge) {
                        btn.innerHTML = `<i class="${iconClass}"></i><span style="position: absolute; top: -2px; right: -2px; font-size: 10px; font-weight: 900; color: #ff6b9d; background: rgba(0, 0, 0, 0.8); border-radius: 50%; width: 14px; height: 14px; display: flex; align-items: center; justify-content: center; line-height: 1;">1</span>`;
                    } else {
                        btn.innerHTML = `<i class="${iconClass}"></i>`;
                    }
                    btn.title = title;
                    btn.style.position = 'relative';
                    if (repeatMode === 1) {
                        btn.style.opacity = '0.5';
                        btn.style.color = '';
                    } else {
                        btn.style.opacity = '1';
                    }
                    if (repeatMode === 2) {
                        btn.style.color = '#ff6b9d';
                    } else if (repeatMode === 0) {
                        btn.style.color = '';
                    }
                };
                
                updateButton(repeatBtn);
                updateButton(fullscreenRepeatBtn);
                updateButton(lyricsViewRepeatBtn);
            }

            document.getElementById('repeatBtn').addEventListener('click', toggleRepeat);
            document.getElementById('fullscreenRepeatBtn').addEventListener('click', toggleRepeat);
            const lyricsViewRepeatBtnEl = document.getElementById('lyricsViewRepeatBtn');
            if (lyricsViewRepeatBtnEl) {
                lyricsViewRepeatBtnEl.addEventListener('click', toggleRepeat);
            }
            
            // Initialize repeat button
            updateRepeatButton();
            
            // Initialize shuffle button
            updateShuffleButton();

            // Progress bar drag is handled by setupProgressBarDrag function above

            document.getElementById('volumeSlider').addEventListener('input', (e) => {
                const value = e.target.value;
                audio.volume = value / 100;
                updateVolumeSliderVisual(e.target, value);
                updateVolumeSliderVisual(document.getElementById('fullscreenVolumeSlider'), value);
                updateVolumeIcon(parseInt(value));
                saveState(); // Save volume change
            });

            audio.addEventListener('loadedmetadata', () => {
                updateDuration();
            });

            audio.addEventListener('timeupdate', () => {
                updateProgress();
                // Save progress every 5 seconds
                if (Math.floor(audio.currentTime) % 5 === 0) {
                    saveState();
                }
            });

            audio.addEventListener('ended', () => {
                if (repeatMode === 2) {
                    // Repeat one - play same song again
                    playSong(currentSongIndex);
                } else if (repeatMode === 0) {
                    // Repeat all - play next song
                    playNext();
                } else {
                    // No repeat - stop playback
                    audio.pause();
                    isPlaying = false;
                    const playBtn = document.getElementById('playBtn');
                    const fullscreenPlayBtn = document.getElementById('fullscreenPlayBtn');
                    if (playBtn) {
                        playBtn.innerHTML = '<i class="fas fa-play"></i>';
                        playBtn.classList.remove('playing');
                    }
                    if (fullscreenPlayBtn) {
                        fullscreenPlayBtn.innerHTML = '<i class="fas fa-play"></i>';
                        fullscreenPlayBtn.classList.remove('playing');
                    }
                }
            });

            audio.addEventListener('play', () => {
                isPlaying = true;
                const playBtn = document.getElementById('playBtn');
                const fullscreenPlayBtn = document.getElementById('fullscreenPlayBtn');
                const lyricsViewPlayBtn = document.getElementById('lyricsViewPlayBtn');
                playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                playBtn.classList.add('playing');
                if (fullscreenPlayBtn) {
                    fullscreenPlayBtn.innerHTML = '<i class="fas fa-pause"></i>';
                    fullscreenPlayBtn.classList.add('playing');
                }
                if (lyricsViewPlayBtn) {
                    lyricsViewPlayBtn.innerHTML = '<i class="fas fa-pause"></i>';
                    lyricsViewPlayBtn.classList.add('playing');
                }
                
                // Mobile animation enhancements
                const albumArt = document.querySelector('.album-art-large');
                const nowPlayingArt = document.querySelector('.now-playing-art');
                if (albumArt) {
                    albumArt.classList.add('playing');
                }
                if (nowPlayingArt) {
                    nowPlayingArt.classList.add('playing');
                }
                
                saveState(); // Save play state
                // Only update playing state, don't re-render entire playlist
                updatePlaylistPlayingState();
            });

            audio.addEventListener('pause', () => {
                isPlaying = false;
                const playBtn = document.getElementById('playBtn');
                const fullscreenPlayBtn = document.getElementById('fullscreenPlayBtn');
                const lyricsViewPlayBtn = document.getElementById('lyricsViewPlayBtn');
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
                playBtn.classList.remove('playing');
                if (fullscreenPlayBtn) {
                    fullscreenPlayBtn.innerHTML = '<i class="fas fa-play"></i>';
                    fullscreenPlayBtn.classList.remove('playing');
                }
                if (lyricsViewPlayBtn) {
                    lyricsViewPlayBtn.innerHTML = '<i class="fas fa-play"></i>';
                    lyricsViewPlayBtn.classList.remove('playing');
                }
                
                // Mobile animation enhancements
                const albumArt = document.querySelector('.album-art-large');
                const nowPlayingArt = document.querySelector('.now-playing-art');
                if (albumArt) {
                    albumArt.classList.remove('playing');
                }
                if (nowPlayingArt) {
                    nowPlayingArt.classList.remove('playing');
                }
                
                saveState(); // Save pause state
                // Only update playing state, don't re-render entire playlist
                updatePlaylistPlayingState();
            });
        }

        function updatePlaylistPlayingState() {
            // Update all playlist items without re-rendering
            const allPlaylistItems = document.querySelectorAll('.playlist-item');
            allPlaylistItems.forEach((item, itemIndex) => {
                // Get the song index from the item's data attribute or by finding the song
                const itemText = item.querySelector('.playlist-item-title')?.textContent;
                const itemArtist = item.querySelector('.playlist-item-artist')?.textContent;
                
                if (itemText && itemArtist) {
                    const songIndex = allSongs.findIndex(s => s.title === itemText && s.artist === itemArtist);
                    const isCurrentlyPlaying = songIndex === currentSongIndex && isPlaying;
                    
                    // Update playing state
                    if (isCurrentlyPlaying) {
                        item.classList.add('playing');
                        // Update playing indicator
                        const numberDiv = item.querySelector('.playlist-item-number');
                        if (numberDiv && !numberDiv.querySelector('.playing-indicator')) {
                            const currentNumber = numberDiv.querySelector('span')?.textContent || '';
                            numberDiv.innerHTML = `
                                <div class="playing-indicator">
                                    <div class="equalizer-bars">
                                        <div class="equalizer-bar"></div>
                                        <div class="equalizer-bar"></div>
                                        <div class="equalizer-bar"></div>
                                        <div class="equalizer-bar"></div>
                                    </div>
                                </div>
                                <span>${currentNumber}</span>
                            `;
                        }
                    } else {
                        item.classList.remove('playing');
                        // Remove playing indicator if exists
                        const numberDiv = item.querySelector('.playlist-item-number');
                        if (numberDiv && numberDiv.querySelector('.playing-indicator')) {
                            const currentNumber = numberDiv.querySelector('span')?.textContent || '';
                            numberDiv.innerHTML = `<span>${currentNumber}</span>`;
                        }
                    }
                }
            });
        }

        async function playSong(index) {
            if (index < 0 || index >= allSongs.length) return;
            
            currentSongIndex = index;
            saveState(); // Save song change
            
            const song = allSongs[index];
            
            // Fetch album cover if it doesn't exist
            if (!song.albumCover) {
                const coverUrl = await fetchAlbumCover(song.title, song.artist);
                if (coverUrl) {
                    song.albumCover = coverUrl;
                }
            }
            
            // Fetch lyrics if they don't exist (do this in background)
            if (!song.lyrics) {
                fetchLyrics(song.title, song.artist).then(lyrics => {
                    if (lyrics) {
                        song.lyrics = lyrics;
                        // Update fullscreen player if it's open
                        const fullscreenPlayer = document.getElementById('fullscreenPlayer');
                        if (fullscreenPlayer.classList.contains('active')) {
                            updateFullscreenPlayer();
                        }
                    }
                });
            }
            
            audio.src = song.src;
            audio.load();
            
            // Only update mini player, keep header showing tab name
            document.getElementById('miniTitle').textContent = song.title;
            document.getElementById('miniArtist').textContent = song.artist;
            
            updateAlbumArtDisplay(song);
            updateFullscreenPlayer(); // Update fullscreen player if open
            
            audio.play();
            // Only update playing state, don't re-render entire playlist
            updatePlaylistPlayingState();
        }

        function togglePlay() {
            if (audio.paused) {
                if (audio.src) {
                    audio.play();
                } else {
                    playSong(0);
                }
            } else {
                audio.pause();
            }
        }

        function getNextSongIndex() {
            if (isShuffleEnabled) {
                // Use shuffled playlist
                if (shuffledPlaylist.length === 0) {
                    shuffledPlaylist = shuffleArray([...Array(allSongs.length).keys()]);
                }
                const currentIndexInShuffle = shuffledPlaylist.indexOf(currentSongIndex);
                if (currentIndexInShuffle === -1 || currentIndexInShuffle === shuffledPlaylist.length - 1) {
                    // Reshuffle for next round
                    shuffledPlaylist = shuffleArray([...Array(allSongs.length).keys()]);
                    return shuffledPlaylist[0];
                }
                return shuffledPlaylist[currentIndexInShuffle + 1];
            } else {
                // Normal sequential order
                let nextIndex = currentSongIndex + 1;
                if (nextIndex >= allSongs.length) {
                    nextIndex = 0;
                }
                return nextIndex;
            }
        }

        function playNext() {
            if (repeatMode === 1 && currentSongIndex === allSongs.length - 1 && !isShuffleEnabled) {
                // No repeat and at last song - stop
                audio.pause();
                isPlaying = false;
                const playBtn = document.getElementById('playBtn');
                const fullscreenPlayBtn = document.getElementById('fullscreenPlayBtn');
                if (playBtn) {
                    playBtn.innerHTML = '<i class="fas fa-play"></i>';
                    playBtn.classList.remove('playing');
                }
                if (fullscreenPlayBtn) {
                    fullscreenPlayBtn.innerHTML = '<i class="fas fa-play"></i>';
                    fullscreenPlayBtn.classList.remove('playing');
                }
                return;
            }
            
            const nextIndex = getNextSongIndex();
            playSong(nextIndex);
        }

        function playPrevious() {
            if (isShuffleEnabled) {
                // In shuffle mode, get previous from shuffled playlist
                if (shuffledPlaylist.length === 0) {
                    shuffledPlaylist = shuffleArray([...Array(allSongs.length).keys()]);
                }
                const currentIndexInShuffle = shuffledPlaylist.indexOf(currentSongIndex);
                if (currentIndexInShuffle === -1 || currentIndexInShuffle === 0) {
                    // Reshuffle for previous round
                    shuffledPlaylist = shuffleArray([...Array(allSongs.length).keys()]);
                    return playSong(shuffledPlaylist[shuffledPlaylist.length - 1]);
                }
                return playSong(shuffledPlaylist[currentIndexInShuffle - 1]);
            } else {
                // Normal sequential order
                let prevIndex = currentSongIndex - 1;
                if (prevIndex < 0) {
                    prevIndex = allSongs.length - 1;
                }
                playSong(prevIndex);
            }
        }

        function toggleShuffle() {
            isShuffleEnabled = !isShuffleEnabled;
            if (isShuffleEnabled) {
                // Create new shuffled playlist
                shuffledPlaylist = shuffleArray([...Array(allSongs.length).keys()]);
                // Ensure current song is first in shuffle
                const currentIndex = shuffledPlaylist.indexOf(currentSongIndex);
                if (currentIndex > 0) {
                    [shuffledPlaylist[0], shuffledPlaylist[currentIndex]] = [shuffledPlaylist[currentIndex], shuffledPlaylist[0]];
                }
            } else {
                shuffledPlaylist = [];
            }
            updateShuffleButton();
            saveState();
        }

        function updateShuffleButton() {
            const shuffleBtn = document.getElementById('shuffleBtn');
            const fullscreenShuffleBtn = document.getElementById('fullscreenShuffleBtn');
            const lyricsViewShuffleBtn = document.getElementById('lyricsViewShuffleBtn');
            const shuffleHeaderBtn = document.getElementById('shuffleHeaderBtn');
            
            const updateButton = (btn) => {
                if (!btn) return;
                if (isShuffleEnabled) {
                    btn.style.color = '#ff6b9d';
                    btn.style.opacity = '1';
                    btn.classList.add('active');
                } else {
                    btn.style.color = '';
                    btn.style.opacity = '';
                    btn.classList.remove('active');
                }
            };
            
            updateButton(shuffleBtn);
            updateButton(fullscreenShuffleBtn);
            updateButton(lyricsViewShuffleBtn);
            
            if (shuffleHeaderBtn) {
                if (isShuffleEnabled) {
                    shuffleHeaderBtn.classList.add('active');
                } else {
                    shuffleHeaderBtn.classList.remove('active');
                }
            }
        }

        function updateProgress() {
            if (audio.duration) {
                const percent = (audio.currentTime / audio.duration) * 100;
                document.getElementById('progressBar').style.width = percent + '%';
                
                const fullscreenProgressBar = document.getElementById('fullscreenProgressBar');
                if (fullscreenProgressBar) {
                    fullscreenProgressBar.style.width = percent + '%';
                }
                
                const lyricsViewProgressBar = document.getElementById('lyricsViewProgressBar');
                if (lyricsViewProgressBar) {
                    lyricsViewProgressBar.style.width = percent + '%';
                }
                
                const minutes = Math.floor(audio.currentTime / 60);
                const seconds = Math.floor(audio.currentTime % 60);
                const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById('currentTime').textContent = timeString;
                
                const fullscreenCurrentTime = document.getElementById('fullscreenCurrentTime');
                if (fullscreenCurrentTime) {
                    fullscreenCurrentTime.textContent = timeString;
                }
                
                const lyricsViewCurrentTime = document.getElementById('lyricsViewCurrentTime');
                if (lyricsViewCurrentTime) {
                    lyricsViewCurrentTime.textContent = timeString;
                }
            }
        }

        function updateDuration() {
            if (audio.duration) {
                const minutes = Math.floor(audio.duration / 60);
                const seconds = Math.floor(audio.duration % 60);
                const durationString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById('duration').textContent = durationString;
                
                const fullscreenDuration = document.getElementById('fullscreenDuration');
                if (fullscreenDuration) {
                    fullscreenDuration.textContent = durationString;
                }
                
                const lyricsViewDuration = document.getElementById('lyricsViewDuration');
                if (lyricsViewDuration) {
                    lyricsViewDuration.textContent = durationString;
                }
            }
        }

        init();
    </script>
    <script src="auth.js"></script>
    <script>
        // Protect this page - redirect to login if not authenticated
        Auth.protectPage();
    </script>
</body>

</html>
